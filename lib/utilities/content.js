"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    contentFromNode: function() {
        return contentFromNode;
    },
    contentFromNodeAndTokens: function() {
        return contentFromNodeAndTokens;
    },
    contentFromNodes: function() {
        return contentFromNodes;
    },
    remainingContentFromNodeTokensAndOffset: function() {
        return remainingContentFromNodeTokensAndOffset;
    }
});
var _necessary = require("necessary");
var _constants = require("../constants");
var _tokenTypes = require("../tokenTypes");
var _replace = require("../utilities/replace");
var first = _necessary.arrayUtilities.first, last = _necessary.arrayUtilities.last;
function contentFromNode(node, context) {
    var content = _constants.EMPTY_STRING;
    var tokens = context.tokens;
    var leadingIndex = (0, _replace.leadingIndexFromNodeAndTokens)(node, tokens), trailingIndex = (0, _replace.trailingIndexFromNodeAndTokens)(node, tokens), start = leadingIndex, end = trailingIndex + 1;
    tokens = tokens.slice(start, end);
    tokens.forEach(function(token) {
        var tokenContent = tokenContentFromToken(token);
        content += tokenContent;
    });
    return content;
}
function contentFromNodes(nodes, augmentLeft, augmentRight, context) {
    var content = _constants.EMPTY_STRING;
    var tokens = context.tokens;
    var lastNode = last(nodes), firstNode = first(nodes), leadingIndex = (0, _replace.leadingIndexFromNodeAndTokens)(firstNode, tokens), trailingIndex = (0, _replace.trailingIndexFromNodeAndTokens)(lastNode, tokens);
    var firstTokenIndex = leadingIndex, lastTokenIndex = trailingIndex; ///
    if (augmentLeft) {
        var previousTokenIndex = firstTokenIndex - 1;
        if (previousTokenIndex > -1) {
            var previousToken = tokens[previousTokenIndex], previousTokenSignificant = previousToken.isSignificant();
            if (!previousTokenSignificant) {
                firstTokenIndex--;
            }
        }
    }
    if (augmentRight) {
        var tokensLength = tokens.length, nextTokenIndex = lastTokenIndex + 1;
        if (nextTokenIndex < tokensLength) {
            var nextToken = tokens[nextTokenIndex], nextTokenSignificant = nextToken.isSignificant(), nextTokenEndOfLineToken = nextToken.isEndOfLineToken();
            if (nextTokenEndOfLineToken || !nextTokenSignificant) {
                lastTokenIndex++;
            }
        }
    }
    var start = firstTokenIndex, end = lastTokenIndex + 1;
    tokens = tokens.slice(start, end);
    tokens.forEach(function(token) {
        var tokenContent = tokenContentFromToken(token);
        content += tokenContent;
    });
    return content;
}
function contentFromNodeAndTokens(node, tokens) {
    var offset = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
    var content = _constants.EMPTY_STRING;
    var leadingIndex = (0, _replace.leadingIndexFromNodeAndTokens)(node, tokens) + offset, trailingIndex = (0, _replace.trailingIndexFromNodeAndTokens)(node, tokens);
    for(var index = leadingIndex; index <= trailingIndex; index++){
        var token = tokens[index], tokenContent = token.getContent();
        content += tokenContent;
    }
    return content;
}
function remainingContentFromNodeTokensAndOffset(node, tokens, offset) {
    var content = contentFromNodeAndTokens(node, tokens, offset), remainingContent = content; ///
    return remainingContent;
}
function tokenContentFromToken(token) {
    var tokenContent = token.getContent();
    var type = token.getType();
    if (type === _tokenTypes.ESCAPED_TOKEN_TYPE) {
        var start = 1;
        tokenContent = tokenContent.substring(start);
    }
    return tokenContent;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvY29udGVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgYXJyYXlVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5cbmltcG9ydCB7IEVNUFRZX1NUUklORyB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IEVTQ0FQRURfVE9LRU5fVFlQRSB9IGZyb20gXCIuLi90b2tlblR5cGVzXCI7XG5pbXBvcnQgeyBsZWFkaW5nSW5kZXhGcm9tTm9kZUFuZFRva2VucywgdHJhaWxpbmdJbmRleEZyb21Ob2RlQW5kVG9rZW5zIH0gZnJvbSBcIi4uL3V0aWxpdGllcy9yZXBsYWNlXCI7XG5cbmNvbnN0IHsgZmlyc3QsIGxhc3QgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udGVudEZyb21Ob2RlKG5vZGUsIGNvbnRleHQpIHtcbiAgbGV0IGNvbnRlbnQgPSBFTVBUWV9TVFJJTkc7XG5cbiAgbGV0IHsgdG9rZW5zIH0gPSBjb250ZXh0O1xuXG4gIGNvbnN0IGxlYWRpbmdJbmRleCA9IGxlYWRpbmdJbmRleEZyb21Ob2RlQW5kVG9rZW5zKG5vZGUsIHRva2VucyksXG4gICAgICAgIHRyYWlsaW5nSW5kZXggPSB0cmFpbGluZ0luZGV4RnJvbU5vZGVBbmRUb2tlbnMobm9kZSwgdG9rZW5zKSxcbiAgICAgICAgc3RhcnQgPSBsZWFkaW5nSW5kZXgsICAvLy9cbiAgICAgICAgZW5kID0gdHJhaWxpbmdJbmRleCArIDE7XG5cbiAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKHN0YXJ0LCBlbmQpO1xuXG4gIHRva2Vucy5mb3JFYWNoKCh0b2tlbikgPT4ge1xuICAgIGNvbnN0IHRva2VuQ29udGVudCA9IHRva2VuQ29udGVudEZyb21Ub2tlbih0b2tlbik7XG5cbiAgICBjb250ZW50ICs9IHRva2VuQ29udGVudDtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb250ZW50RnJvbU5vZGVzKG5vZGVzLCBhdWdtZW50TGVmdCwgYXVnbWVudFJpZ2h0LCBjb250ZXh0KSB7XG4gIGxldCBjb250ZW50ID0gRU1QVFlfU1RSSU5HO1xuXG4gIGxldCB7IHRva2VucyB9ID0gY29udGV4dDtcblxuICBjb25zdCBsYXN0Tm9kZSA9IGxhc3Qobm9kZXMpLFxuICAgICAgICBmaXJzdE5vZGUgPSBmaXJzdChub2RlcyksXG4gICAgICAgIGxlYWRpbmdJbmRleCA9IGxlYWRpbmdJbmRleEZyb21Ob2RlQW5kVG9rZW5zKGZpcnN0Tm9kZSwgdG9rZW5zKSxcbiAgICAgICAgdHJhaWxpbmdJbmRleCA9IHRyYWlsaW5nSW5kZXhGcm9tTm9kZUFuZFRva2VucyhsYXN0Tm9kZSwgdG9rZW5zKTtcblxuICBsZXQgZmlyc3RUb2tlbkluZGV4ID0gbGVhZGluZ0luZGV4LCAgLy8vXG4gICAgICBsYXN0VG9rZW5JbmRleCA9IHRyYWlsaW5nSW5kZXg7IC8vL1xuXG4gIGlmIChhdWdtZW50TGVmdCkge1xuICAgIGNvbnN0IHByZXZpb3VzVG9rZW5JbmRleCA9IGZpcnN0VG9rZW5JbmRleCAtIDE7XG5cbiAgICBpZiAocHJldmlvdXNUb2tlbkluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzVG9rZW4gPSB0b2tlbnNbcHJldmlvdXNUb2tlbkluZGV4XSxcbiAgICAgICAgICAgIHByZXZpb3VzVG9rZW5TaWduaWZpY2FudCA9IHByZXZpb3VzVG9rZW4uaXNTaWduaWZpY2FudCgpO1xuXG4gICAgICBpZiAoIXByZXZpb3VzVG9rZW5TaWduaWZpY2FudCkge1xuICAgICAgICBmaXJzdFRva2VuSW5kZXgtLTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoYXVnbWVudFJpZ2h0KSB7XG4gICAgY29uc3QgdG9rZW5zTGVuZ3RoID0gdG9rZW5zLmxlbmd0aCxcbiAgICAgICAgICBuZXh0VG9rZW5JbmRleCA9IGxhc3RUb2tlbkluZGV4ICsgMTtcblxuICAgIGlmIChuZXh0VG9rZW5JbmRleCA8IHRva2Vuc0xlbmd0aCkge1xuICAgICAgY29uc3QgbmV4dFRva2VuID0gdG9rZW5zW25leHRUb2tlbkluZGV4XSxcbiAgICAgICAgICAgIG5leHRUb2tlblNpZ25pZmljYW50ID0gbmV4dFRva2VuLmlzU2lnbmlmaWNhbnQoKSxcbiAgICAgICAgICAgIG5leHRUb2tlbkVuZE9mTGluZVRva2VuID0gbmV4dFRva2VuLmlzRW5kT2ZMaW5lVG9rZW4oKTtcblxuICAgICAgaWYgKG5leHRUb2tlbkVuZE9mTGluZVRva2VuIHx8ICFuZXh0VG9rZW5TaWduaWZpY2FudCkge1xuICAgICAgICBsYXN0VG9rZW5JbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHN0YXJ0ID0gZmlyc3RUb2tlbkluZGV4LCAgLy8vXG4gICAgICAgIGVuZCA9IGxhc3RUb2tlbkluZGV4ICsgMTtcblxuICB0b2tlbnMgPSB0b2tlbnMuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgdG9rZW5zLmZvckVhY2goKHRva2VuKSA9PiB7XG4gICAgY29uc3QgdG9rZW5Db250ZW50ID0gdG9rZW5Db250ZW50RnJvbVRva2VuKHRva2VuKTtcblxuICAgIGNvbnRlbnQgKz0gdG9rZW5Db250ZW50O1xuICB9KTtcblxuICByZXR1cm4gY29udGVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRlbnRGcm9tTm9kZUFuZFRva2Vucyhub2RlLCB0b2tlbnMsIG9mZnNldCA9IDApIHtcbiAgbGV0IGNvbnRlbnQgPSBFTVBUWV9TVFJJTkc7XG5cbiAgY29uc3QgbGVhZGluZ0luZGV4ID0gbGVhZGluZ0luZGV4RnJvbU5vZGVBbmRUb2tlbnMobm9kZSwgdG9rZW5zKSArIG9mZnNldCxcbiAgICAgICAgdHJhaWxpbmdJbmRleCA9IHRyYWlsaW5nSW5kZXhGcm9tTm9kZUFuZFRva2Vucyhub2RlLCB0b2tlbnMpO1xuXG4gIGZvciAobGV0IGluZGV4ID0gbGVhZGluZ0luZGV4OyBpbmRleCA8PSB0cmFpbGluZ0luZGV4OyBpbmRleCsrKSB7XG4gICAgY29uc3QgdG9rZW4gPSB0b2tlbnNbaW5kZXhdLFxuICAgICAgICAgIHRva2VuQ29udGVudCA9IHRva2VuLmdldENvbnRlbnQoKTtcblxuICAgIGNvbnRlbnQgKz0gdG9rZW5Db250ZW50O1xuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1haW5pbmdDb250ZW50RnJvbU5vZGVUb2tlbnNBbmRPZmZzZXQobm9kZSwgdG9rZW5zLCBvZmZzZXQpIHtcbiAgY29uc3QgY29udGVudCA9IGNvbnRlbnRGcm9tTm9kZUFuZFRva2Vucyhub2RlLCB0b2tlbnMsIG9mZnNldCksXG4gICAgICAgIHJlbWFpbmluZ0NvbnRlbnQgPSBjb250ZW50OyAvLy9cblxuICByZXR1cm4gcmVtYWluaW5nQ29udGVudDtcbn1cblxuZnVuY3Rpb24gdG9rZW5Db250ZW50RnJvbVRva2VuKHRva2VuKSB7XG4gIGxldCB0b2tlbkNvbnRlbnQgPSB0b2tlbi5nZXRDb250ZW50KCk7XG5cbiAgY29uc3QgdHlwZSA9IHRva2VuLmdldFR5cGUoKTtcblxuICBpZiAodHlwZSA9PT0gRVNDQVBFRF9UT0tFTl9UWVBFKSB7XG4gICAgY29uc3Qgc3RhcnQgPSAxO1xuXG4gICAgdG9rZW5Db250ZW50ID0gdG9rZW5Db250ZW50LnN1YnN0cmluZyhzdGFydCk7XG4gIH1cblxuICByZXR1cm4gdG9rZW5Db250ZW50O1xufVxuIl0sIm5hbWVzIjpbImNvbnRlbnRGcm9tTm9kZSIsImNvbnRlbnRGcm9tTm9kZUFuZFRva2VucyIsImNvbnRlbnRGcm9tTm9kZXMiLCJyZW1haW5pbmdDb250ZW50RnJvbU5vZGVUb2tlbnNBbmRPZmZzZXQiLCJmaXJzdCIsImFycmF5VXRpbGl0aWVzIiwibGFzdCIsIm5vZGUiLCJjb250ZXh0IiwiY29udGVudCIsIkVNUFRZX1NUUklORyIsInRva2VucyIsImxlYWRpbmdJbmRleCIsImxlYWRpbmdJbmRleEZyb21Ob2RlQW5kVG9rZW5zIiwidHJhaWxpbmdJbmRleCIsInRyYWlsaW5nSW5kZXhGcm9tTm9kZUFuZFRva2VucyIsInN0YXJ0IiwiZW5kIiwic2xpY2UiLCJmb3JFYWNoIiwidG9rZW4iLCJ0b2tlbkNvbnRlbnQiLCJ0b2tlbkNvbnRlbnRGcm9tVG9rZW4iLCJub2RlcyIsImF1Z21lbnRMZWZ0IiwiYXVnbWVudFJpZ2h0IiwibGFzdE5vZGUiLCJmaXJzdE5vZGUiLCJmaXJzdFRva2VuSW5kZXgiLCJsYXN0VG9rZW5JbmRleCIsInByZXZpb3VzVG9rZW5JbmRleCIsInByZXZpb3VzVG9rZW4iLCJwcmV2aW91c1Rva2VuU2lnbmlmaWNhbnQiLCJpc1NpZ25pZmljYW50IiwidG9rZW5zTGVuZ3RoIiwibGVuZ3RoIiwibmV4dFRva2VuSW5kZXgiLCJuZXh0VG9rZW4iLCJuZXh0VG9rZW5TaWduaWZpY2FudCIsIm5leHRUb2tlbkVuZE9mTGluZVRva2VuIiwiaXNFbmRPZkxpbmVUb2tlbiIsIm9mZnNldCIsImluZGV4IiwiZ2V0Q29udGVudCIsInJlbWFpbmluZ0NvbnRlbnQiLCJ0eXBlIiwiZ2V0VHlwZSIsIkVTQ0FQRURfVE9LRU5fVFlQRSIsInN1YnN0cmluZyJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztJQVVnQkEsZUFBZTtlQUFmQTs7SUE0RUFDLHdCQUF3QjtlQUF4QkE7O0lBdkRBQyxnQkFBZ0I7ZUFBaEJBOztJQXVFQUMsdUNBQXVDO2VBQXZDQTs7O3lCQXBHZTt5QkFFRjswQkFDTTt1QkFDMkM7QUFFOUUsSUFBUUMsUUFBZ0JDLHlCQUFjLENBQTlCRCxPQUFPRSxPQUFTRCx5QkFBYyxDQUF2QkM7QUFFUixTQUFTTixnQkFBZ0JPLElBQUksRUFBRUMsT0FBTztJQUMzQyxJ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