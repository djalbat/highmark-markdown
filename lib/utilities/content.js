"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    contentFromMarkdownNodes: function() {
        return contentFromMarkdownNodes;
    },
    contentFromNodeAndTokens: function() {
        return contentFromNodeAndTokens;
    },
    remainingContentFromNodeTokensAndOffset: function() {
        return remainingContentFromNodeTokensAndOffset;
    }
});
var _necessary = require("necessary");
var _constants = require("../constants");
var _tokenTypes = require("../tokenTypes");
var first = _necessary.arrayUtilities.first, last = _necessary.arrayUtilities.last;
function contentFromMarkdownNodes(markdownNodes, context, leftTrimmed, rightTrimmed) {
    var content = _constants.EMPTY_STRING;
    var tokens = context.tokens;
    var markdownNodesLength = markdownNodes.length, firstMarkdownNode = first(markdownNodes), lastMarkdownNode = markdownNodesLength === 1 ? firstMarkdownNode : last(markdownNodes), firstSignificantToken = firstMarkdownNode.getFirstSignificantToken(), lastSignificantToken = lastMarkdownNode.getLastSignificantToken(), firstSignificantTokenIndex = tokens.indexOf(firstSignificantToken), lastSignificantTokenIndex = tokens.indexOf(lastSignificantToken);
    var firstTokenIndex = firstSignificantTokenIndex, lastTokenIndex = lastSignificantTokenIndex; ///
    if (!leftTrimmed) {
        var previousTokenIndex = firstTokenIndex - 1;
        if (previousTokenIndex > -1) {
            var previousToken = tokens[previousTokenIndex], previousTokenSignificant = previousToken.isSignificant();
            if (!previousTokenSignificant) {
                firstTokenIndex--;
            }
        }
    }
    if (!rightTrimmed) {
        var tokensLength = tokens.length, nextTokenIndex = lastTokenIndex + 1;
        if (nextTokenIndex < tokensLength) {
            var nextToken = tokens[nextTokenIndex], nextTokenSignificant = nextToken.isSignificant(), nextTokenEndOfLineToken = nextToken.isEndOfLineToken();
            if (nextTokenEndOfLineToken || !nextTokenSignificant) {
                lastTokenIndex++;
            }
        }
    }
    var start = firstTokenIndex, end = lastTokenIndex + 1;
    tokens = tokens.slice(start, end);
    tokens.forEach(function(token) {
        var tokenContent = tokenContentFromToken(token);
        content += tokenContent;
    });
    return content;
}
function contentFromNodeAndTokens(node, tokens) {
    var offset = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
    var firstSignificantToken = node.getFirstSignificantToken(), lastSignificantToken = node.getLastSignificantToken(), firstToken = firstSignificantToken, lastToken = lastSignificantToken, firstTokenIndex = tokens.indexOf(firstToken) + offset, lastTokenIndex = tokens.indexOf(lastToken);
    var content = _constants.EMPTY_STRING;
    for(var index = firstTokenIndex; index <= lastTokenIndex; index++){
        var token = tokens[index], tokenContent = token.getContent();
        content += tokenContent;
    }
    return content;
}
function remainingContentFromNodeTokensAndOffset(node, tokens, offset) {
    var content = contentFromNodeAndTokens(node, tokens, offset), remainingContent = content; ///
    return remainingContent;
}
function tokenContentFromToken(token) {
    var tokenContent = token.getContent();
    var type = token.getType();
    if (type === _tokenTypes.ESCAPED_TOKEN_TYPE) {
        var start = 1;
        tokenContent = tokenContent.substring(start);
    }
    return tokenContent;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvY29udGVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgYXJyYXlVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5cbmltcG9ydCB7IEVNUFRZX1NUUklORyB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7IEVTQ0FQRURfVE9LRU5fVFlQRSB9IGZyb20gXCIuLi90b2tlblR5cGVzXCI7XG5cbmNvbnN0IHsgZmlyc3QsIGxhc3QgfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udGVudEZyb21NYXJrZG93bk5vZGVzKG1hcmtkb3duTm9kZXMsIGNvbnRleHQsIGxlZnRUcmltbWVkLCByaWdodFRyaW1tZWQpIHtcbiAgbGV0IGNvbnRlbnQgPSBFTVBUWV9TVFJJTkc7XG5cbiAgbGV0IHsgdG9rZW5zIH0gPSBjb250ZXh0O1xuXG4gIGNvbnN0IG1hcmtkb3duTm9kZXNMZW5ndGggPSBtYXJrZG93bk5vZGVzLmxlbmd0aCxcbiAgICAgICAgZmlyc3RNYXJrZG93bk5vZGUgPSBmaXJzdChtYXJrZG93bk5vZGVzKSxcbiAgICAgICAgbGFzdE1hcmtkb3duTm9kZSA9IChtYXJrZG93bk5vZGVzTGVuZ3RoID09PSAxKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RNYXJrZG93bk5vZGUgOiAvLy9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3QobWFya2Rvd25Ob2RlcyksXG4gICAgICAgIGZpcnN0U2lnbmlmaWNhbnRUb2tlbiA9IGZpcnN0TWFya2Rvd25Ob2RlLmdldEZpcnN0U2lnbmlmaWNhbnRUb2tlbigpLFxuICAgICAgICBsYXN0U2lnbmlmaWNhbnRUb2tlbiA9IGxhc3RNYXJrZG93bk5vZGUuZ2V0TGFzdFNpZ25pZmljYW50VG9rZW4oKSxcbiAgICAgICAgZmlyc3RTaWduaWZpY2FudFRva2VuSW5kZXggPSB0b2tlbnMuaW5kZXhPZihmaXJzdFNpZ25pZmljYW50VG9rZW4pLFxuICAgICAgICBsYXN0U2lnbmlmaWNhbnRUb2tlbkluZGV4ID0gdG9rZW5zLmluZGV4T2YobGFzdFNpZ25pZmljYW50VG9rZW4pO1xuXG4gIGxldCBmaXJzdFRva2VuSW5kZXggPSBmaXJzdFNpZ25pZmljYW50VG9rZW5JbmRleCwgIC8vL1xuICAgICAgbGFzdFRva2VuSW5kZXggPSBsYXN0U2lnbmlmaWNhbnRUb2tlbkluZGV4OyAvLy9cblxuICBpZiAoIWxlZnRUcmltbWVkKSB7XG4gICAgY29uc3QgcHJldmlvdXNUb2tlbkluZGV4ID0gZmlyc3RUb2tlbkluZGV4IC0gMTtcblxuICAgIGlmIChwcmV2aW91c1Rva2VuSW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgcHJldmlvdXNUb2tlbiA9IHRva2Vuc1twcmV2aW91c1Rva2VuSW5kZXhdLFxuICAgICAgICAgICAgcHJldmlvdXNUb2tlblNpZ25pZmljYW50ID0gcHJldmlvdXNUb2tlbi5pc1NpZ25pZmljYW50KCk7XG5cbiAgICAgIGlmICghcHJldmlvdXNUb2tlblNpZ25pZmljYW50KSB7XG4gICAgICAgIGZpcnN0VG9rZW5JbmRleC0tO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICghcmlnaHRUcmltbWVkKSB7XG4gICAgY29uc3QgdG9rZW5zTGVuZ3RoID0gdG9rZW5zLmxlbmd0aCxcbiAgICAgICAgICBuZXh0VG9rZW5JbmRleCA9IGxhc3RUb2tlbkluZGV4ICsgMTtcblxuICAgIGlmIChuZXh0VG9rZW5JbmRleCA8IHRva2Vuc0xlbmd0aCkge1xuICAgICAgY29uc3QgbmV4dFRva2VuID0gdG9rZW5zW25leHRUb2tlbkluZGV4XSxcbiAgICAgICAgICAgIG5leHRUb2tlblNpZ25pZmljYW50ID0gbmV4dFRva2VuLmlzU2lnbmlmaWNhbnQoKSxcbiAgICAgICAgICAgIG5leHRUb2tlbkVuZE9mTGluZVRva2VuID0gbmV4dFRva2VuLmlzRW5kT2ZMaW5lVG9rZW4oKTtcblxuICAgICAgaWYgKG5leHRUb2tlbkVuZE9mTGluZVRva2VuIHx8ICFuZXh0VG9rZW5TaWduaWZpY2FudCkge1xuICAgICAgICBsYXN0VG9rZW5JbmRleCsrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHN0YXJ0ID0gZmlyc3RUb2tlbkluZGV4LCAgLy8vXG4gICAgICAgIGVuZCA9IGxhc3RUb2tlbkluZGV4ICsgMTtcblxuICB0b2tlbnMgPSB0b2tlbnMuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgdG9rZW5zLmZvckVhY2goKHRva2VuKSA9PiB7XG4gICAgY29uc3QgdG9rZW5Db250ZW50ID0gdG9rZW5Db250ZW50RnJvbVRva2VuKHRva2VuKTtcblxuICAgIGNvbnRlbnQgKz0gdG9rZW5Db250ZW50O1xuICB9KTtcblxuICByZXR1cm4gY29udGVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnRlbnRGcm9tTm9kZUFuZFRva2Vucyhub2RlLCB0b2tlbnMsIG9mZnNldCA9IDApIHtcbiAgY29uc3QgZmlyc3RTaWduaWZpY2FudFRva2VuID0gbm9kZS5nZXRGaXJzdFNpZ25pZmljYW50VG9rZW4oKSxcbiAgICAgICAgbGFzdFNpZ25pZmljYW50VG9rZW4gPSBub2RlLmdldExhc3RTaWduaWZpY2FudFRva2VuKCksXG4gICAgICAgIGZpcnN0VG9rZW4gPSBmaXJzdFNpZ25pZmljYW50VG9rZW4sIC8vL1xuICAgICAgICBsYXN0VG9rZW4gPSBsYXN0U2lnbmlmaWNhbnRUb2tlbiwgLy8vXG4gICAgICAgIGZpcnN0VG9rZW5JbmRleCA9IHRva2Vucy5pbmRleE9mKGZpcnN0VG9rZW4pICsgb2Zmc2V0LCAgLy8vXG4gICAgICAgIGxhc3RUb2tlbkluZGV4ID0gdG9rZW5zLmluZGV4T2YobGFzdFRva2VuKTtcblxuICBsZXQgY29udGVudCA9IEVNUFRZX1NUUklORztcblxuICBmb3IgKGxldCBpbmRleCA9IGZpcnN0VG9rZW5JbmRleDsgaW5kZXggPD0gbGFzdFRva2VuSW5kZXg7IGluZGV4KyspIHtcbiAgICBjb25zdCB0b2tlbiA9IHRva2Vuc1tpbmRleF0sXG4gICAgICAgICAgdG9rZW5Db250ZW50ID0gdG9rZW4uZ2V0Q29udGVudCgpO1xuXG4gICAgY29udGVudCArPSB0b2tlbkNvbnRlbnQ7XG4gIH1cblxuICByZXR1cm4gY29udGVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbWFpbmluZ0NvbnRlbnRGcm9tTm9kZVRva2Vuc0FuZE9mZnNldChub2RlLCB0b2tlbnMsIG9mZnNldCkge1xuICBjb25zdCBjb250ZW50ID0gY29udGVudEZyb21Ob2RlQW5kVG9rZW5zKG5vZGUsIHRva2Vucywgb2Zmc2V0KSxcbiAgICAgICAgcmVtYWluaW5nQ29udGVudCA9IGNvbnRlbnQ7IC8vL1xuXG4gIHJldHVybiByZW1haW5pbmdDb250ZW50O1xufVxuXG5mdW5jdGlvbiB0b2tlbkNvbnRlbnRGcm9tVG9rZW4odG9rZW4pIHtcbiAgbGV0IHRva2VuQ29udGVudCA9IHRva2VuLmdldENvbnRlbnQoKTtcblxuICBjb25zdCB0eXBlID0gdG9rZW4uZ2V0VHlwZSgpO1xuXG4gIGlmICh0eXBlID09PSBFU0NBUEVEX1RPS0VOX1RZUEUpIHtcbiAgICBjb25zdCBzdGFydCA9IDE7XG5cbiAgICB0b2tlbkNvbnRlbnQgPSB0b2tlbkNvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0KTtcbiAgfVxuXG4gIHJldHVybiB0b2tlbkNvbnRlbnQ7XG59XG4iXSwibmFtZXMiOlsiY29udGVudEZyb21NYXJrZG93bk5vZGVzIiwiY29udGVudEZyb21Ob2RlQW5kVG9rZW5zIiwicmVtYWluaW5nQ29udGVudEZyb21Ob2RlVG9rZW5zQW5kT2Zmc2V0IiwiZmlyc3QiLCJhcnJheVV0aWxpdGllcyIsImxhc3QiLCJtYXJrZG93bk5vZGVzIiwiY29udGV4dCIsImxlZnRUcmltbWVkIiwicmlnaHRUcmltbWVkIiwiY29udGVudCIsIkVNUFRZX1NUUklORyIsInRva2VucyIsIm1hcmtkb3duTm9kZXNMZW5ndGgiLCJsZW5ndGgiLCJmaXJzdE1hcmtkb3duTm9kZSIsImxhc3RNYXJrZG93bk5vZGUiLCJmaXJzdFNpZ25pZmljYW50VG9rZW4iLCJnZXRGaXJzdFNpZ25pZmljYW50VG9rZW4iLCJsYXN0U2lnbmlmaWNhbnRUb2tlbiIsImdldExhc3RTaWduaWZpY2FudFRva2VuIiwiZmlyc3RTaWduaWZpY2FudFRva2VuSW5kZXgiLCJpbmRleE9mIiwibGFzdFNpZ25pZmljYW50VG9rZW5JbmRleCIsImZpcnN0VG9rZW5JbmRleCIsImxhc3RUb2tlbkluZGV4IiwicHJldmlvdXNUb2tlbkluZGV4IiwicHJldmlvdXNUb2tlbiIsInByZXZpb3VzVG9rZW5TaWduaWZpY2FudCIsImlzU2lnbmlmaWNhbnQiLCJ0b2tlbnNMZW5ndGgiLCJuZXh0VG9rZW5JbmRleCIsIm5leHRUb2tlbiIsIm5leHRUb2tlblNpZ25pZmljYW50IiwibmV4dFRva2VuRW5kT2ZMaW5lVG9rZW4iLCJpc0VuZE9mTGluZVRva2VuIiwic3RhcnQiLCJlbmQiLCJzbGljZSIsImZvckVhY2giLCJ0b2tlbiIsInRva2VuQ29udGVudCIsInRva2VuQ29udGVudEZyb21Ub2tlbiIsIm5vZGUiLCJvZmZzZXQiLCJmaXJzdFRva2VuIiwibGFzdFRva2VuIiwiaW5kZXgiLCJnZXRDb250ZW50IiwicmVtYWluaW5nQ29udGVudCIsInR5cGUiLCJnZXRUeXBlIiwiRVNDQVBFRF9UT0tFTl9UWVBFIiwic3Vic3RyaW5nIl0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsiLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lBU2dCQSx3QkFBd0I7ZUFBeEJBOztJQTREQUMsd0JBQXdCO2VBQXhCQTs7SUFvQkFDLHVDQUF1QztlQUF2Q0E7Ozt5QkF2RmU7eUJBRUY7MEJBQ007QUFFbkMsSUFBUUMsUUFBZ0JDLHlCQUFjLENBQTlCRCxPQUFPRSxPQUFTRCx5QkFBYyxDQUF2QkM7QUFFUixTQUFTTCx5QkFBeUJNLGFBQWEsRUFBRUMsT0FBTyxFQUFFQyxXQUFXLEVBQUVDLFlBQVk7SUFDeEYsSUFBSUMsVUFBVUMsdUJBQVk7SUFFMUIsSUFBSSxBQUFFQyxTQUFXTCxRQUFYSztJQUVOLElBQU1DLHNCQUFzQlAsY0FBY1EsTUFBTSxFQUMxQ0Msb0JBQW9CWixNQUFNRyxnQkFDMUJVLG1CQUFtQixBQUFDSCx3QkFBd0IsSUFDckJFLG9CQUNFVixLQUFLQyxnQkFDOUJXLHdCQUF3QkYsa0JBQWtCRyx3QkFBd0IsSUFDbEVDLHVCQUF1QkgsaUJBQWlCSSx1QkFBdUIsSUFDL0RDLDZCQUE2QlQsT0FBT1UsT0FBTyxDQUFDTCx3QkFDNUNNLDRCQUE0QlgsT0FBT1UsT0FBTyxDQUFDSDtJQUVqRCxJQUFJSyxrQkFBa0JILDRCQUNsQkksaUJBQWlCRiwyQkFBMkIsR0FBRztJQUVuRCxJQUFJLENBQUNmLGFBQWE7UUFDaEIsSUFBTWtCLHFCQUFxQkYsa0JBQWtCO1FBRTdDLElBQUlFLHFCQUFxQixDQUFDLEdBQUc7WUFDM0IsSUFBTUMsZ0JBQWdCZixNQUFNLENBQUNjLG1CQUFtQixFQUMxQ0UsMkJBQTJCRCxjQUFjRSxhQUFhO1lBRTVELElBQUksQ0FBQ0QsMEJBQTBCO2dCQUM3Qko7WUFDRjtRQUNGO0lBQ0Y7SUFFQSxJQUFJLENBQUNmLGNBQWM7UUFDakIsSUFBTXFCLGVBQWVsQixPQUFPRSxNQUFNLEVBQzVCaUIsaUJBQWlCTixpQkFBaUI7UUFFeEMsSUFBSU0saUJBQWlCRCxjQUFjO1lBQ2pDLElBQU1FLFlBQVlwQixNQUFNLENBQUNtQixlQUFlLEVBQ2xDRSx1QkFBdUJELFVBQVVILGFBQWEsSUFDOUNLLDBCQUEwQkYsVUFBVUcsZ0JBQWdCO1lBRTFELElBQUlELDJCQUEyQixDQUFDRCxzQkFBc0I7Z0JBQ3BEUjtZQUNGO1FBQ0Y7SUFDRjtJQUVBLElBQU1XLFFBQVFaLGlCQUNSYSxNQUFNWixpQkFBaUI7SUFFN0JiLFNBQVNBLE9BQU8wQixLQUFLLENBQUNGLE9BQU9DO0lBRTdCekIsT0FBTzJCLE9BQU8sQ0FBQyxTQUFDQztRQUNkLElBQU1DLGVBQWVDLHNCQUFzQkY7UUFFM0M5QixXQUFXK0I7SUFDYjtJQUVBLE9BQU8vQjtBQUNUO0FBRU8sU0FBU1QseUJBQXlCMEMsSUFBSSxFQUFFL0IsTUFBTTtRQUFFZ0MsU0FBQUEsaUVBQVM7SUFDOUQsSUFBTTNCLHdCQUF3QjBCLEtBQUt6Qix3QkFBd0IsSUFDckRDLHVCQUF1QndCLEtBQUt2Qix1QkFBdUIsSUFDbkR5QixhQUFhNUIsdUJBQ2I2QixZQUFZM0Isc0JBQ1pLLGtCQUFrQlosT0FBT1UsT0FBTyxDQUFDdUIsY0FBY0QsUUFDL0NuQixpQkFBaUJiLE9BQU9VLE9BQU8sQ0FBQ3dCO0lBRXRDLElBQUlwQyxVQUFVQyx1QkFBWTtJQUUxQixJQUFLLElBQUlvQyxRQUFRdkIsaUJBQWlCdUIsU0FBU3RCLGdCQUFnQnNCLFFBQVM7UUFDbEUsSUFBTVAsUUFBUTVCLE1BQU0sQ0FBQ21DLE1BQU0sRUFDckJOLGVBQWVELE1BQU1RLFVBQVU7UUFFckN0QyxXQUFXK0I7SUFDYjtJQUVBLE9BQU8vQjtBQUNUO0FBRU8sU0FBU1Isd0NBQXdDeUMsSUFBSSxFQUFFL0IsTUFBTSxFQUFFZ0MsTUFBTTtJQUMxRSxJQUFNbEMsVUFBVVQseUJBQXlCMEMsTUFBTS9CLFFBQVFnQyxTQUNqREssbUJBQW1CdkMsU0FBUyxHQUFHO0lBRXJDLE9BQU91QztBQUNUO0FBRUEsU0FBU1Asc0JBQXNCRixLQUFLO0lBQ2xDLElBQUlDLGVBQWVELE1BQU1RLFVBQVU7SUFFbkMsSUFBTUUsT0FBT1YsTUFBTVcsT0FBTztJQUUxQixJQUFJRCxTQUFTRSw4QkFBa0IsRUFBRTtRQUMvQixJQUFNaEIsUUFBUTtRQUVkSyxlQUFlQSxhQUFhWSxTQUFTLENBQUNqQjtJQUN4QztJQUVBLE9BQU9LO0FBQ1QifQ==