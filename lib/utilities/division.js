"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    addFootnoteHTMLNodes: function() {
        return addFootnoteHTMLNodes;
    },
    footnoteItemHTMLTransformsFromLineHTMLTransforms: function() {
        return footnoteItemHTMLTransformsFromLineHTMLTransforms;
    },
    groupHTMLNodes: function() {
        return groupHTMLNodes;
    },
    lineHTMLTransformsFromFootnoteHTMLTransforms: function() {
        return lineHTMLTransformsFromFootnoteHTMLTransforms;
    },
    numberFootnoteLinkHTMLNodes: function() {
        return numberFootnoteLinkHTMLNodes;
    },
    paginateGroupedHTMLNodes: function() {
        return paginateGroupedHTMLNodes;
    },
    removeFootnoteHTMLNodes: function() {
        return removeFootnoteHTMLNodes;
    },
    removeFootnotesDirectiveHTMLNode: function() {
        return removeFootnotesDirectiveHTMLNode;
    },
    removeHTMLNodes: function() {
        return removeHTMLNodes;
    },
    removeNestedFootnoteLinkHTMLNodes: function() {
        return removeNestedFootnoteLinkHTMLNodes;
    },
    removePageNumberDirectiveHTMLNode: function() {
        return removePageNumberDirectiveHTMLNode;
    }
});
var _necessary = require("necessary");
var _html = /*#__PURE__*/ _interop_require_default(require("../transform/html"));
var _footnote = /*#__PURE__*/ _interop_require_default(require("../node/html/footnote"));
var _line = /*#__PURE__*/ _interop_require_default(require("../transform/html/line"));
var _footnote1 = /*#__PURE__*/ _interop_require_default(require("../transform/html/footnote"));
var _footnoteItem = /*#__PURE__*/ _interop_require_default(require("../transform/html/footnoteItem"));
var _footnoteLink = /*#__PURE__*/ _interop_require_default(require("../transform/html/footnoteLink"));
var _nestedFootnoteLink = /*#__PURE__*/ _interop_require_default(require("../transform/html/nestedFootnoteLink"));
var _footnotes = /*#__PURE__*/ _interop_require_default(require("../transform/html/directive/footnotes"));
var _pageNumber = /*#__PURE__*/ _interop_require_default(require("../transform/html/directive/pageNumber"));
var _constants = require("../constants");
var _html1 = require("../utilities/html");
function _array_like_to_array(arr, len) {
    if (len == null || len > arr.length) len = arr.length;
    for(var i = 0, arr2 = new Array(len); i < len; i++)arr2[i] = arr[i];
    return arr2;
}
function _array_without_holes(arr) {
    if (Array.isArray(arr)) return _array_like_to_array(arr);
}
function _instanceof(left, right) {
    if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) {
        return !!right[Symbol.hasInstance](left);
    } else {
        return left instanceof right;
    }
}
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function _iterable_to_array(iter) {
    if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}
function _non_iterable_spread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _to_consumable_array(arr) {
    return _array_without_holes(arr) || _iterable_to_array(arr) || _unsupported_iterable_to_array(arr) || _non_iterable_spread();
}
function _unsupported_iterable_to_array(o, minLen) {
    if (!o) return;
    if (typeof o === "string") return _array_like_to_array(o, minLen);
    var n = Object.prototype.toString.call(o).slice(8, -1);
    if (n === "Object" && o.constructor) n = o.constructor.name;
    if (n === "Map" || n === "Set") return Array.from(n);
    if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _array_like_to_array(o, minLen);
}
var backwardsForEach = _necessary.arrayUtilities.backwardsForEach;
function groupHTMLNodes(htmlNodes) {
    var groupedHTMLNodesArray = [];
    var groupedHTMLNodes = [];
    htmlNodes.forEach(function(htmlNode) {
        var htmlNodeFootnoteHTMLNode = _instanceof(htmlNode, _footnote.default);
        if (!htmlNodeFootnoteHTMLNode) {
            var groupedHTMLNodeLength = groupedHTMLNodes.length;
            if (groupedHTMLNodeLength > 0) {
                groupedHTMLNodesArray.push(groupedHTMLNodes);
                groupedHTMLNodes = [];
            }
        }
        var groupedHTMLNode = htmlNode; ///
        groupedHTMLNodes.push(groupedHTMLNode);
    });
    var groupedHTMLNodeLength = groupedHTMLNodes.length;
    if (groupedHTMLNodeLength) {
        groupedHTMLNodesArray.push(groupedHTMLNodes);
    }
    return groupedHTMLNodesArray;
}
function removeHTMLNodes(node) {
    var htmlNodes = (0, _html1.htmlNodesFromNode)(node);
    htmlNodes.forEach(function(htmlNode) {
        var htmlTransform = _html.default.fromHTNLNOde(htmlNode);
        htmlTransform.remove();
    });
    return htmlNodes;
}
function addFootnoteHTMLNodes(footnoteHTMLTransforms, node, context) {
    var footnoteLinkHTMLNodes = (0, _html1.footnoteLinkHTMLNodesFromNode)(node), footnoteLinkHTMLTransforms = footnoteLinkHTMLTransformsFromFootnoteLinkHTMLNodes(footnoteLinkHTMLNodes);
    backwardsForEach(footnoteLinkHTMLTransforms, function(footnoteLinkHTMLTransform) {
        var identifier = footnoteLinkHTMLTransform.identifier(context), footnoteHTMLTransform = footnoteHTMLTransforms.find(function(footnoteHTMLTransform) {
            var identifierMatches = footnoteHTMLTransform.matchIdentifier(identifier, context);
            if (identifierMatches) {
                return true;
            }
        }) || null;
        if (footnoteHTMLTransform !== null) {
            footnoteHTMLTransform.addAfterFootnoteLinkHTMLTransform(footnoteLinkHTMLTransform);
        }
    });
}
function removeFootnoteHTMLNodes(node) {
    var footnoteHTMLNodes = (0, _html1.footnoteHTMLNodesFromNode)(node), footnoteHTMLTransforms = footnoteHTMLTransformsFromFootnoteHTMLNodes(footnoteHTMLNodes);
    footnoteHTMLTransforms.forEach(function(footnoteHTMLTransform) {
        footnoteHTMLTransform.remove();
    });
    return footnoteHTMLTransforms;
}
function paginateGroupedHTMLNodes(groupedHTMLNodesArray, context) {
    var paginatedHTMLNodesArray = [];
    var _context_maximumPageLines = context.maximumPageLines, maximumPageLines = _context_maximumPageLines === void 0 ? _constants.DEFAULT_MAXIMUM_PAGE_LINES : _context_maximumPageLines;
    var pageLines = 0, paginatedHTMLNodes = [];
    groupedHTMLNodesArray.forEach(function(groupedHTMLNodes) {
        var _paginatedHTMLNodes;
        var groupLines = groupedHTMLNodes.reduce(function(groupLines, groupedHTMLNode) {
            var lines = groupedHTMLNode.lines(context);
            groupLines += lines;
            return groupLines;
        }, 0);
        var paginatedHTMLNodesLength = paginatedHTMLNodes.length;
        if (paginatedHTMLNodesLength > 0) {
            if (pageLines + groupLines > maximumPageLines) {
                paginatedHTMLNodesArray.push(paginatedHTMLNodes);
                pageLines = 0;
                paginatedHTMLNodes = [];
            }
        }
        (_paginatedHTMLNodes = paginatedHTMLNodes).push.apply(_paginatedHTMLNodes, _to_consumable_array(groupedHTMLNodes));
        pageLines += groupLines;
    });
    var paginatedHTMLNodesLength = paginatedHTMLNodes.length;
    if (paginatedHTMLNodesLength) {
        paginatedHTMLNodesArray.push(paginatedHTMLNodes);
    }
    return paginatedHTMLNodesArray;
}
function numberFootnoteLinkHTMLNodes(footnoteHTMLTransforms, identifierMap, node, context) {
    var footnoteLinkHTMLNodes = (0, _html1.footnoteLinkHTMLNodesFromNode)(node), identifiers = Object.keys(identifierMap), identifiersLength = identifiers.length, start = identifiersLength + 1;
    footnoteHTMLTransforms.forEach(function(footnoteHTMLTransform, index) {
        var identifier = footnoteHTMLTransform.identifier(context), number = start + index;
        identifierMap[identifier] = number;
    });
    footnoteLinkHTMLNodes.forEach(function(footnoteLinkHTMLNode) {
        var identifier = footnoteLinkHTMLNode.identifier(context), number = identifierMap[identifier];
        footnoteLinkHTMLNode.setNumber(number);
    });
    return start;
}
function removeFootnotesDirectiveHTMLNode(node) {
    var footnotesDirectiveHTMLNode = (0, _html1.footnotesDirectiveHTMLNodeFromNode)(node);
    if (footnotesDirectiveHTMLNode !== null) {
        var footnotesDirectiveHTMLTransform = _footnotes.default.fromFootnotesDirectiveHTMLNode(footnotesDirectiveHTMLNode);
        footnotesDirectiveHTMLTransform.remove();
    }
    return footnotesDirectiveHTMLNode;
}
function removePageNumberDirectiveHTMLNode(node) {
    var pageNumberDirectiveHTNLTransform = null;
    var pageNumberDirectiveHTMLNode = (0, _html1.pageNumberDirectiveHTMLNodeFromNode)(node);
    if (pageNumberDirectiveHTMLNode !== null) {
        pageNumberDirectiveHTNLTransform = _pageNumber.default.fromPageNumberDirectiveHTMLNode(pageNumberDirectiveHTMLNode);
        pageNumberDirectiveHTNLTransform.remove();
    }
    return pageNumberDirectiveHTNLTransform;
}
function removeNestedFootnoteLinkHTMLNodes(node) {
    var nestedFootnoteLinkHTMLNodes = (0, _html1.nestedFootnoteLinkHTMLNodesFromNode)(node), nestedFootnoteLinkHTMLTransforms = nestedFootnoteLinkHTMLTransformsFromNestedFootnoteLinkHTMLNodes(nestedFootnoteLinkHTMLNodes);
    nestedFootnoteLinkHTMLTransforms.forEach(function(nestedFootnoteLinkHTMLTransform) {
        nestedFootnoteLinkHTMLTransform.remove();
    });
}
function lineHTMLTransformsFromFootnoteHTMLTransforms(footnoteHTMLTransforms) {
    var lineHTMLTransforms = footnoteHTMLTransforms.map(function(footnoteHTMLTransform) {
        var lineHTMLTransform = _line.default.fromFootnoteHTMLTransform(footnoteHTMLTransform);
        return lineHTMLTransform;
    });
    return lineHTMLTransforms;
}
function footnoteItemHTMLTransformsFromLineHTMLTransforms(lineHTMLTransforms, identifierMap, start) {
    var numbers = Object.values(identifierMap), identifiers = Object.keys(identifierMap), footnoteItemHTMLTransforms = lineHTMLTransforms.map(function(lineHTMLTransform, index) {
        var number = start + index;
        index = numbers.indexOf(number);
        var identifier = identifiers[index], footnoteItemHTMLTransform = _footnoteItem.default.fromLineTMLTransformAndIdentifier(lineHTMLTransform, identifier);
        return footnoteItemHTMLTransform;
    });
    return footnoteItemHTMLTransforms;
}
function footnoteHTMLTransformsFromFootnoteHTMLNodes(footnoteHTMLNodes) {
    var footnoteHTMLTransforms = footnoteHTMLNodes.map(function(footnoteHTMLNode) {
        var footnoteHTMLTransform = _footnote1.default.fromFootnoteHTMLNode(footnoteHTMLNode);
        return footnoteHTMLTransform;
    });
    return footnoteHTMLTransforms;
}
function footnoteLinkHTMLTransformsFromFootnoteLinkHTMLNodes(footnoteLinkHTMLNodes) {
    var footnoteLinkHTMLTransforms = footnoteLinkHTMLNodes.map(function(footnoteLinkHTMLNode) {
        var footnoteLinkHTMLTransform = _footnoteLink.default.fromFootnoteLinkHTMLNode(footnoteLinkHTMLNode);
        return footnoteLinkHTMLTransform;
    });
    return footnoteLinkHTMLTransforms;
}
function nestedFootnoteLinkHTMLTransformsFromNestedFootnoteLinkHTMLNodes(nestedFootnoteLinkHTMLNodes) {
    var nestedFootnoteLinkHTMLTransforms = nestedFootnoteLinkHTMLNodes.map(function(nestedFootnoteLinkHTMLNode) {
        var nestedFootnoteLinkHTMLTransform = _nestedFootnoteLink.default.fromNestedFootnoteLinkHTMLNode(nestedFootnoteLinkHTMLNode);
        return nestedFootnoteLinkHTMLTransform;
    });
    return nestedFootnoteLinkHTMLTransforms;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvZGl2aXNpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGFycmF5VXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgSFRNTFRyYW5zZm9ybSBmcm9tIFwiLi4vdHJhbnNmb3JtL2h0bWxcIjtcbmltcG9ydCBGb290bm90ZUhUTUxOb2RlIGZyb20gXCIuLi9ub2RlL2h0bWwvZm9vdG5vdGVcIjtcbmltcG9ydCBMaW5lSFRNTFRyYW5zZm9ybSBmcm9tIFwiLi4vdHJhbnNmb3JtL2h0bWwvbGluZVwiO1xuaW1wb3J0IEZvb3Rub3RlSFRNTFRyYW5zZm9ybSBmcm9tIFwiLi4vdHJhbnNmb3JtL2h0bWwvZm9vdG5vdGVcIjtcbmltcG9ydCBGb290bm90ZUl0ZW1IVE1MVHJhbnNmb3JtIGZyb20gXCIuLi90cmFuc2Zvcm0vaHRtbC9mb290bm90ZUl0ZW1cIjtcbmltcG9ydCBGb290bm90ZUxpbmtIVE1MVHJhbnNmb3JtIGZyb20gXCIuLi90cmFuc2Zvcm0vaHRtbC9mb290bm90ZUxpbmtcIjtcbmltcG9ydCBOZXN0ZWRGb290bm90ZUxpbmtIVE1MVHJhbnNmb3JtIGZyb20gXCIuLi90cmFuc2Zvcm0vaHRtbC9uZXN0ZWRGb290bm90ZUxpbmtcIjtcbmltcG9ydCBGb290bm90ZXNEaXJlY3RpdmVIVE1MVHJhbnNmb3JtIGZyb20gXCIuLi90cmFuc2Zvcm0vaHRtbC9kaXJlY3RpdmUvZm9vdG5vdGVzXCI7XG5pbXBvcnQgUGFnZU51bWJlckRpcmVjdGl2ZUhUTUxUcmFuc2Zvcm0gZnJvbSBcIi4uL3RyYW5zZm9ybS9odG1sL2RpcmVjdGl2ZS9wYWdlTnVtYmVyXCI7XG5cbmltcG9ydCB7IERFRkFVTFRfTUFYSU1VTV9QQUdFX0xJTkVTIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgaHRtbE5vZGVzRnJvbU5vZGUsXG4gICAgICAgICBmb290bm90ZUhUTUxOb2Rlc0Zyb21Ob2RlLFxuICAgICAgICAgZm9vdG5vdGVMaW5rSFRNTE5vZGVzRnJvbU5vZGUsXG4gICAgICAgICBmb290bm90ZXNEaXJlY3RpdmVIVE1MTm9kZUZyb21Ob2RlLFxuICAgICAgICAgbmVzdGVkRm9vdG5vdGVMaW5rSFRNTE5vZGVzRnJvbU5vZGUsXG4gICAgICAgICBwYWdlTnVtYmVyRGlyZWN0aXZlSFRNTE5vZGVGcm9tTm9kZSB9IGZyb20gXCIuLi91dGlsaXRpZXMvaHRtbFwiO1xuXG5jb25zdCB7IGJhY2t3YXJkc0ZvckVhY2ggfSA9IGFycmF5VXRpbGl0aWVzO1xuXG5leHBvcnQgZnVuY3Rpb24gZ3JvdXBIVE1MTm9kZXMoaHRtbE5vZGVzKSB7XG4gIGNvbnN0IGdyb3VwZWRIVE1MTm9kZXNBcnJheSA9IFtdO1xuXG4gIGxldCBncm91cGVkSFRNTE5vZGVzID0gW107XG5cbiAgaHRtbE5vZGVzLmZvckVhY2goKGh0bWxOb2RlKSA9PiB7XG4gICAgY29uc3QgaHRtbE5vZGVGb290bm90ZUhUTUxOb2RlID0gKGh0bWxOb2RlIGluc3RhbmNlb2YgRm9vdG5vdGVIVE1MTm9kZSk7XG5cbiAgICBpZiAoIWh0bWxOb2RlRm9vdG5vdGVIVE1MTm9kZSkge1xuICAgICAgY29uc3QgZ3JvdXBlZEhUTUxOb2RlTGVuZ3RoID0gZ3JvdXBlZEhUTUxOb2Rlcy5sZW5ndGg7XG5cbiAgICAgIGlmIChncm91cGVkSFRNTE5vZGVMZW5ndGggPiAwKSB7XG4gICAgICAgIGdyb3VwZWRIVE1MTm9kZXNBcnJheS5wdXNoKGdyb3VwZWRIVE1MTm9kZXMpO1xuXG4gICAgICAgIGdyb3VwZWRIVE1MTm9kZXMgPSBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBncm91cGVkSFRNTE5vZGUgPSBodG1sTm9kZTsgLy8vXG5cbiAgICBncm91cGVkSFRNTE5vZGVzLnB1c2goZ3JvdXBlZEhUTUxOb2RlKTtcbiAgfSk7XG5cbiAgY29uc3QgZ3JvdXBlZEhUTUxOb2RlTGVuZ3RoID0gZ3JvdXBlZEhUTUxOb2Rlcy5sZW5ndGg7XG5cbiAgaWYgKGdyb3VwZWRIVE1MTm9kZUxlbmd0aCkge1xuICAgIGdyb3VwZWRIVE1MTm9kZXNBcnJheS5wdXNoKGdyb3VwZWRIVE1MTm9kZXMpO1xuICB9XG5cbiAgcmV0dXJuIGdyb3VwZWRIVE1MTm9kZXNBcnJheTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUhUTUxOb2Rlcyhub2RlKSB7XG4gIGNvbnN0IGh0bWxOb2RlcyA9IGh0bWxOb2Rlc0Zyb21Ob2RlKG5vZGUpO1xuXG4gIGh0bWxOb2Rlcy5mb3JFYWNoKChodG1sTm9kZSkgPT4ge1xuICAgIGNvbnN0IGh0bWxUcmFuc2Zvcm0gPSBIVE1MVHJhbnNmb3JtLmZyb21IVE5MTk9kZShodG1sTm9kZSk7XG5cbiAgICBodG1sVHJhbnNmb3JtLnJlbW92ZSgpO1xuICB9KTtcblxuICByZXR1cm4gaHRtbE5vZGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRm9vdG5vdGVIVE1MTm9kZXMoZm9vdG5vdGVIVE1MVHJhbnNmb3Jtcywgbm9kZSwgY29udGV4dCkge1xuICBjb25zdCBmb290bm90ZUxpbmtIVE1MTm9kZXMgPSBmb290bm90ZUxpbmtIVE1MTm9kZXNGcm9tTm9kZShub2RlKSxcbiAgICAgICAgZm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybXMgPSBmb290bm90ZUxpbmtIVE1MVHJhbnNmb3Jtc0Zyb21Gb290bm90ZUxpbmtIVE1MTm9kZXMoZm9vdG5vdGVMaW5rSFRNTE5vZGVzKTtcblxuICBiYWNrd2FyZHNGb3JFYWNoKGZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm1zLCAoZm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybSkgPT4ge1xuICAgIGNvbnN0IGlkZW50aWZpZXIgPSBmb290bm90ZUxpbmtIVE1MVHJhbnNmb3JtLmlkZW50aWZpZXIoY29udGV4dCksXG4gICAgICAgICAgZm9vdG5vdGVIVE1MVHJhbnNmb3JtID0gZm9vdG5vdGVIVE1MVHJhbnNmb3Jtcy5maW5kKChmb290bm90ZUhUTUxUcmFuc2Zvcm0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlkZW50aWZpZXJNYXRjaGVzID0gZm9vdG5vdGVIVE1MVHJhbnNmb3JtLm1hdGNoSWRlbnRpZmllcihpZGVudGlmaWVyLCBjb250ZXh0KTtcblxuICAgICAgICAgICAgaWYgKGlkZW50aWZpZXJNYXRjaGVzKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pIHx8IG51bGw7XG5cbiAgICBpZiAoZm9vdG5vdGVIVE1MVHJhbnNmb3JtICE9PSBudWxsKSB7XG4gICAgICBmb290bm90ZUhUTUxUcmFuc2Zvcm0uYWRkQWZ0ZXJGb290bm90ZUxpbmtIVE1MVHJhbnNmb3JtKGZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVGb290bm90ZUhUTUxOb2Rlcyhub2RlKSB7XG4gIGNvbnN0IGZvb3Rub3RlSFRNTE5vZGVzID0gZm9vdG5vdGVIVE1MTm9kZXNGcm9tTm9kZShub2RlKSxcbiAgICAgICAgZm9vdG5vdGVIVE1MVHJhbnNmb3JtcyA9IGZvb3Rub3RlSFRNTFRyYW5zZm9ybXNGcm9tRm9vdG5vdGVIVE1MTm9kZXMoZm9vdG5vdGVIVE1MTm9kZXMpO1xuXG4gIGZvb3Rub3RlSFRNTFRyYW5zZm9ybXMuZm9yRWFjaCgoZm9vdG5vdGVIVE1MVHJhbnNmb3JtKSA9PiB7XG4gICAgZm9vdG5vdGVIVE1MVHJhbnNmb3JtLnJlbW92ZSgpO1xuICB9KTtcblxuICByZXR1cm4gZm9vdG5vdGVIVE1MVHJhbnNmb3Jtcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHBhZ2luYXRlR3JvdXBlZEhUTUxOb2Rlcyhncm91cGVkSFRNTE5vZGVzQXJyYXksIGNvbnRleHQpIHtcbiAgY29uc3QgcGFnaW5hdGVkSFRNTE5vZGVzQXJyYXkgPSBbXTtcblxuICBjb25zdCB7IG1heGltdW1QYWdlTGluZXMgPSBERUZBVUxUX01BWElNVU1fUEFHRV9MSU5FUyB9ID0gY29udGV4dDtcblxuICBsZXQgcGFnZUxpbmVzID0gMCxcbiAgICAgIHBhZ2luYXRlZEhUTUxOb2RlcyA9IFtdO1xuXG4gIGdyb3VwZWRIVE1MTm9kZXNBcnJheS5mb3JFYWNoKChncm91cGVkSFRNTE5vZGVzKSA9PiB7XG4gICAgY29uc3QgZ3JvdXBMaW5lcyA9IGdyb3VwZWRIVE1MTm9kZXMucmVkdWNlKChncm91cExpbmVzLCBncm91cGVkSFRNTE5vZGUpID0+IHtcbiAgICAgIGNvbnN0IGxpbmVzID0gZ3JvdXBlZEhUTUxOb2RlLmxpbmVzKGNvbnRleHQpO1xuXG4gICAgICBncm91cExpbmVzICs9IGxpbmVzO1xuXG4gICAgICByZXR1cm4gZ3JvdXBMaW5lcztcbiAgICB9LCAwKTtcblxuICAgIGNvbnN0IHBhZ2luYXRlZEhUTUxOb2Rlc0xlbmd0aCA9IHBhZ2luYXRlZEhUTUxOb2Rlcy5sZW5ndGg7XG5cbiAgICBpZiAocGFnaW5hdGVkSFRNTE5vZGVzTGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHBhZ2VMaW5lcyArIGdyb3VwTGluZXMgPiBtYXhpbXVtUGFnZUxpbmVzKSB7XG4gICAgICAgIHBhZ2luYXRlZEhUTUxOb2Rlc0FycmF5LnB1c2gocGFnaW5hdGVkSFRNTE5vZGVzKTtcblxuICAgICAgICBwYWdlTGluZXMgPSAwO1xuXG4gICAgICAgIHBhZ2luYXRlZEhUTUxOb2RlcyA9IFtdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBhZ2luYXRlZEhUTUxOb2Rlcy5wdXNoKC4uLmdyb3VwZWRIVE1MTm9kZXMpO1xuXG4gICAgcGFnZUxpbmVzICs9IGdyb3VwTGluZXM7XG4gIH0pO1xuXG4gIGNvbnN0IHBhZ2luYXRlZEhUTUxOb2Rlc0xlbmd0aCA9IHBhZ2luYXRlZEhUTUxOb2Rlcy5sZW5ndGg7XG5cbiAgaWYgKHBhZ2luYXRlZEhUTUxOb2Rlc0xlbmd0aCkge1xuICAgIHBhZ2luYXRlZEhUTUxOb2Rlc0FycmF5LnB1c2gocGFnaW5hdGVkSFRNTE5vZGVzKTtcbiAgfVxuXG4gIHJldHVybiBwYWdpbmF0ZWRIVE1MTm9kZXNBcnJheTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG51bWJlckZvb3Rub3RlTGlua0hUTUxOb2Rlcyhmb290bm90ZUhUTUxUcmFuc2Zvcm1zLCBpZGVudGlmaWVyTWFwLCBub2RlLCBjb250ZXh0KSB7XG4gIGNvbnN0IGZvb3Rub3RlTGlua0hUTUxOb2RlcyA9IGZvb3Rub3RlTGlua0hUTUxOb2Rlc0Zyb21Ob2RlKG5vZGUpLFxuICAgICAgICBpZGVudGlmaWVycyA9IE9iamVjdC5rZXlzKGlkZW50aWZpZXJNYXApLFxuICAgICAgICBpZGVudGlmaWVyc0xlbmd0aCA9IGlkZW50aWZpZXJzLmxlbmd0aCxcbiAgICAgICAgc3RhcnQgPSBpZGVudGlmaWVyc0xlbmd0aCArIDE7XG5cbiAgZm9vdG5vdGVIVE1MVHJhbnNmb3Jtcy5mb3JFYWNoKChmb290bm90ZUhUTUxUcmFuc2Zvcm0sIGluZGV4KSA9PiB7XG4gICAgY29uc3QgaWRlbnRpZmllciA9IGZvb3Rub3RlSFRNTFRyYW5zZm9ybS5pZGVudGlmaWVyKGNvbnRleHQpLFxuICAgICAgICAgIG51bWJlciA9IHN0YXJ0ICsgaW5kZXg7XG5cbiAgICBpZGVudGlmaWVyTWFwW2lkZW50aWZpZXJdID0gbnVtYmVyO1xuICB9KTtcblxuICBmb290bm90ZUxpbmtIVE1MTm9kZXMuZm9yRWFjaCgoZm9vdG5vdGVMaW5rSFRNTE5vZGUpID0+IHtcbiAgICBjb25zdCBpZGVudGlmaWVyID0gZm9vdG5vdGVMaW5rSFRNTE5vZGUuaWRlbnRpZmllcihjb250ZXh0KSxcbiAgICAgICAgICBudW1iZXIgPSBpZGVudGlmaWVyTWFwW2lkZW50aWZpZXJdO1xuXG4gICAgZm9vdG5vdGVMaW5rSFRNTE5vZGUuc2V0TnVtYmVyKG51bWJlcik7XG4gIH0pXG5cbiAgcmV0dXJuIHN0YXJ0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRm9vdG5vdGVzRGlyZWN0aXZlSFRNTE5vZGUobm9kZSkge1xuICBjb25zdCBmb290bm90ZXNEaXJlY3RpdmVIVE1MTm9kZSA9IGZvb3Rub3Rlc0RpcmVjdGl2ZUhUTUxOb2RlRnJvbU5vZGUobm9kZSk7XG5cbiAgaWYgKGZvb3Rub3Rlc0RpcmVjdGl2ZUhUTUxOb2RlICE9PSBudWxsKSB7XG4gICAgY29uc3QgZm9vdG5vdGVzRGlyZWN0aXZlSFRNTFRyYW5zZm9ybSA9IEZvb3Rub3Rlc0RpcmVjdGl2ZUhUTUxUcmFuc2Zvcm0uZnJvbUZvb3Rub3Rlc0RpcmVjdGl2ZUhUTUxOb2RlKGZvb3Rub3Rlc0RpcmVjdGl2ZUhUTUxOb2RlKTtcblxuICAgIGZvb3Rub3Rlc0RpcmVjdGl2ZUhUTUxUcmFuc2Zvcm0ucmVtb3ZlKCk7XG4gIH1cblxuICByZXR1cm4gZm9vdG5vdGVzRGlyZWN0aXZlSFRNTE5vZGU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVQYWdlTnVtYmVyRGlyZWN0aXZlSFRNTE5vZGUobm9kZSkge1xuICBsZXQgcGFnZU51bWJlckRpcmVjdGl2ZUhUTkxUcmFuc2Zvcm0gPSBudWxsO1xuXG4gIGNvbnN0IHBhZ2VOdW1iZXJEaXJlY3RpdmVIVE1MTm9kZSA9IHBhZ2VOdW1iZXJEaXJlY3RpdmVIVE1MTm9kZUZyb21Ob2RlKG5vZGUpO1xuXG4gIGlmIChwYWdlTnVtYmVyRGlyZWN0aXZlSFRNTE5vZGUgIT09IG51bGwpIHtcbiAgICBwYWdlTnVtYmVyRGlyZWN0aXZlSFROTFRyYW5zZm9ybSA9IFBhZ2VOdW1iZXJEaXJlY3RpdmVIVE1MVHJhbnNmb3JtLmZyb21QYWdlTnVtYmVyRGlyZWN0aXZlSFRNTE5vZGUocGFnZU51bWJlckRpcmVjdGl2ZUhUTUxOb2RlKTtcblxuICAgIHBhZ2VOdW1iZXJEaXJlY3RpdmVIVE5MVHJhbnNmb3JtLnJlbW92ZSgpO1xuICB9XG5cbiAgcmV0dXJuIHBhZ2VOdW1iZXJEaXJlY3RpdmVIVE5MVHJhbnNmb3JtO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlTmVzdGVkRm9vdG5vdGVMaW5rSFRNTE5vZGVzKG5vZGUpIHtcbiAgY29uc3QgbmVzdGVkRm9vdG5vdGVMaW5rSFRNTE5vZGVzID0gbmVzdGVkRm9vdG5vdGVMaW5rSFRNTE5vZGVzRnJvbU5vZGUobm9kZSksXG4gICAgICAgIG5lc3RlZEZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm1zID0gbmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybXNGcm9tTmVzdGVkRm9vdG5vdGVMaW5rSFRNTE5vZGVzKG5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2Rlcyk7XG5cbiAgbmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybXMuZm9yRWFjaCgobmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybSkgPT4ge1xuICAgIG5lc3RlZEZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm0ucmVtb3ZlKCk7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGluZUhUTUxUcmFuc2Zvcm1zRnJvbUZvb3Rub3RlSFRNTFRyYW5zZm9ybXMoZm9vdG5vdGVIVE1MVHJhbnNmb3Jtcykge1xuICBjb25zdCBsaW5lSFRNTFRyYW5zZm9ybXMgPSBmb290bm90ZUhUTUxUcmFuc2Zvcm1zLm1hcCgoZm9vdG5vdGVIVE1MVHJhbnNmb3JtKSA9PiB7XG4gICAgY29uc3QgbGluZUhUTUxUcmFuc2Zvcm0gPSBMaW5lSFRNTFRyYW5zZm9ybS5mcm9tRm9vdG5vdGVIVE1MVHJhbnNmb3JtKGZvb3Rub3RlSFRNTFRyYW5zZm9ybSk7XG5cbiAgICByZXR1cm4gbGluZUhUTUxUcmFuc2Zvcm07XG4gIH0pO1xuXG4gIHJldHVybiBsaW5lSFRNTFRyYW5zZm9ybXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb290bm90ZUl0ZW1IVE1MVHJhbnNmb3Jtc0Zyb21MaW5lSFRNTFRyYW5zZm9ybXMobGluZUhUTUxUcmFuc2Zvcm1zLCBpZGVudGlmaWVyTWFwLCBzdGFydCkge1xuICBjb25zdCBudW1iZXJzID0gT2JqZWN0LnZhbHVlcyhpZGVudGlmaWVyTWFwKSxcbiAgICAgICAgaWRlbnRpZmllcnMgPSBPYmplY3Qua2V5cyhpZGVudGlmaWVyTWFwKSxcbiAgICAgICAgZm9vdG5vdGVJdGVtSFRNTFRyYW5zZm9ybXMgPSBsaW5lSFRNTFRyYW5zZm9ybXMubWFwKChsaW5lSFRNTFRyYW5zZm9ybSwgaW5kZXgpID0+IHtcbiAgICAgICAgICBjb25zdCBudW1iZXIgPSBzdGFydCArIGluZGV4O1xuXG4gICAgICAgICAgaW5kZXggPSBudW1iZXJzLmluZGV4T2YobnVtYmVyKTtcblxuICAgICAgICAgIGNvbnN0IGlkZW50aWZpZXIgPSBpZGVudGlmaWVyc1tpbmRleF0sXG4gICAgICAgICAgICAgICAgZm9vdG5vdGVJdGVtSFRNTFRyYW5zZm9ybSA9IEZvb3Rub3RlSXRlbUhUTUxUcmFuc2Zvcm0uZnJvbUxpbmVUTUxUcmFuc2Zvcm1BbmRJZGVudGlmaWVyKGxpbmVIVE1MVHJhbnNmb3JtLCBpZGVudGlmaWVyKTtcblxuICAgICAgICAgIHJldHVybiBmb290bm90ZUl0ZW1IVE1MVHJhbnNmb3JtO1xuICAgICAgICB9KTtcblxuICByZXR1cm4gZm9vdG5vdGVJdGVtSFRNTFRyYW5zZm9ybXM7XG59XG5cbmZ1bmN0aW9uIGZvb3Rub3RlSFRNTFRyYW5zZm9ybXNGcm9tRm9vdG5vdGVIVE1MTm9kZXMoZm9vdG5vdGVIVE1MTm9kZXMpIHtcbiAgY29uc3QgZm9vdG5vdGVIVE1MVHJhbnNmb3JtcyA9IGZvb3Rub3RlSFRNTE5vZGVzLm1hcCgoZm9vdG5vdGVIVE1MTm9kZSkgPT4ge1xuICAgIGNvbnN0IGZvb3Rub3RlSFRNTFRyYW5zZm9ybSA9IEZvb3Rub3RlSFRNTFRyYW5zZm9ybS5mcm9tRm9vdG5vdGVIVE1MTm9kZShmb290bm90ZUhUTUxOb2RlKTtcblxuICAgIHJldHVybiBmb290bm90ZUhUTUxUcmFuc2Zvcm07XG4gIH0pO1xuXG4gIHJldHVybiBmb290bm90ZUhUTUxUcmFuc2Zvcm1zO1xufVxuXG5mdW5jdGlvbiBmb290bm90ZUxpbmtIVE1MVHJhbnNmb3Jtc0Zyb21Gb290bm90ZUxpbmtIVE1MTm9kZXMoZm9vdG5vdGVMaW5rSFRNTE5vZGVzKSB7XG4gIGNvbnN0IGZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm1zID0gZm9vdG5vdGVMaW5rSFRNTE5vZGVzLm1hcCgoZm9vdG5vdGVMaW5rSFRNTE5vZGUpID0+IHtcbiAgICBjb25zdCBmb290bm90ZUxpbmtIVE1MVHJhbnNmb3JtID0gRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybS5mcm9tRm9vdG5vdGVMaW5rSFRNTE5vZGUoZm9vdG5vdGVMaW5rSFRNTE5vZGUpO1xuXG4gICAgcmV0dXJuIGZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm07XG4gIH0pO1xuXG4gIHJldHVybiBmb290bm90ZUxpbmtIVE1MVHJhbnNmb3Jtcztcbn1cblxuZnVuY3Rpb24gbmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybXNGcm9tTmVzdGVkRm9vdG5vdGVMaW5rSFRNTE5vZGVzKG5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2Rlcykge1xuICBjb25zdCBuZXN0ZWRGb290bm90ZUxpbmtIVE1MVHJhbnNmb3JtcyA9IG5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2Rlcy5tYXAoKG5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2RlKSA9PiB7XG4gICAgY29uc3QgbmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybSA9IE5lc3RlZEZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm0uZnJvbU5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2RlKG5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2RlKTtcblxuICAgIHJldHVybiBuZXN0ZWRGb290bm90ZUxpbmtIVE1MVHJhbnNmb3JtO1xuICB9KTtcblxuICByZXR1cm4gbmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybXM7XG59XG4iXSwibmFtZXMiOlsiYWRkRm9vdG5vdGVIVE1MTm9kZXMiLCJmb290bm90ZUl0ZW1IVE1MVHJhbnNmb3Jtc0Zyb21MaW5lSFRNTFRyYW5zZm9ybXMiLCJncm91cEhUTUxOb2RlcyIsImxpbmVIVE1MVHJhbnNmb3Jtc0Zyb21Gb290bm90ZUhUTUxUcmFuc2Zvcm1zIiwibnVtYmVyRm9vdG5vdGVMaW5rSFRNTE5vZGVzIiwicGFnaW5hdGVHcm91cGVkSFRNTE5vZGVzIiwicmVtb3ZlRm9vdG5vdGVIVE1MTm9kZXMiLCJyZW1vdmVGb290bm90ZXNEaXJlY3RpdmVIVE1MTm9kZSIsInJlbW92ZUhUTUxOb2RlcyIsInJlbW92ZU5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2RlcyIsInJlbW92ZVBhZ2VOdW1iZXJEaXJlY3RpdmVIVE1MTm9kZSIsImJhY2t3YXJkc0ZvckVhY2giLCJhcnJheVV0aWxpdGllcyIsImh0bWxOb2RlcyIsImdyb3VwZWRIVE1MTm9kZXNBcnJheSIsImdyb3VwZWRIVE1MTm9kZXMiLCJmb3JFYWNoIiwiaHRtbE5vZGUiLCJodG1sTm9kZUZvb3Rub3RlSFRNTE5vZGUiLCJGb290bm90ZUhUTUxOb2RlIiwiZ3JvdXBlZEhUTUxOb2RlTGVuZ3RoIiwibGVuZ3RoIiwicHVzaCIsImdyb3VwZWRIVE1MTm9kZSIsIm5vZGUiLCJodG1sTm9kZXNGcm9tTm9kZSIsImh0bWxUcmFuc2Zvcm0iLCJIVE1MVHJhbnNmb3JtIiwiZnJvbUhUTkxOT2RlIiwicmVtb3ZlIiwiZm9vdG5vdGVIVE1MVHJhbnNmb3JtcyIsImNvbnRleHQiLCJmb290bm90ZUxpbmtIVE1MTm9kZXMiLCJmb290bm90ZUxpbmtIVE1MTm9kZXNGcm9tTm9kZSIsImZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm1zIiwiZm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybXNGcm9tRm9vdG5vdGVMaW5rSFRNTE5vZGVzIiwiZm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybSIsImlkZW50aWZpZXIiLCJmb290bm90ZUhUTUxUcmFuc2Zvcm0iLCJmaW5kIiwiaWRlbnRpZmllck1hdGNoZXMiLCJtYXRjaElkZW50aWZpZXIiLCJhZGRBZnRlckZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm0iLCJmb290bm90ZUhUTUxOb2RlcyIsImZvb3Rub3RlSFRNTE5vZGVzRnJvbU5vZGUiLCJmb290bm90ZUhUTUxUcmFuc2Zvcm1zRnJvbUZvb3Rub3RlSFRNTE5vZGVzIiwicGFnaW5hdGVkSFRNTE5vZGVzQXJyYXkiLCJtYXhpbXVtUGFnZUxpbmVzIiwiREVGQVVMVF9NQVhJTVVNX1BBR0VfTElORVMiLCJwYWdlTGluZXMiLCJwYWdpbmF0ZWRIVE1MTm9kZXMiLCJncm91cExpbmVzIiwicmVkdWNlIiwibGluZXMiLCJwYWdpbmF0ZWRIVE1MTm9kZXNMZW5ndGgiLCJpZGVudGlmaWVyTWFwIiwiaWRlbnRpZmllcnMiLCJPYmplY3QiLCJrZXlzIiwiaWRlbnRpZmllcnNMZW5ndGgiLCJzdGFydCIsImluZGV4IiwibnVtYmVyIiwiZm9vdG5vdGVMaW5rSFRNTE5vZGUiLCJzZXROdW1iZXIiLCJmb290bm90ZXNEaXJlY3RpdmVIVE1MTm9kZSIsImZvb3Rub3Rlc0RpcmVjdGl2ZUhUTUxOb2RlRnJvbU5vZGUiLCJmb290bm90ZXNEaXJlY3RpdmVIVE1MVHJhbnNmb3JtIiwiRm9vdG5vdGVzRGlyZWN0aXZlSFRNTFRyYW5zZm9ybSIsImZyb21Gb290bm90ZXNEaXJlY3RpdmVIVE1MTm9kZSIsInBhZ2VOdW1iZXJEaXJlY3RpdmVIVE5MVHJhbnNmb3JtIiwicGFnZU51bWJlckRpcmVjdGl2ZUhUTUxOb2RlIiwicGFnZU51bWJlckRpcmVjdGl2ZUhUTUxOb2RlRnJvbU5vZGUiLCJQYWdlTnVtYmVyRGlyZWN0aXZlSFRNTFRyYW5zZm9ybSIsImZyb21QYWdlTnVtYmVyRGlyZWN0aXZlSFRNTE5vZGUiLCJuZXN0ZWRGb290bm90ZUxpbmtIVE1MTm9kZXMiLCJuZXN0ZWRGb290bm90ZUxpbmtIVE1MTm9kZXNGcm9tTm9kZSIsIm5lc3RlZEZvb3Rub3RlTGlua0hUTUxUcmFuc2Zvcm1zIiwibmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybXNGcm9tTmVzdGVkRm9vdG5vdGVMaW5rSFRNTE5vZGVzIiwibmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybSIsImxpbmVIVE1MVHJhbnNmb3JtcyIsIm1hcCIsImxpbmVIVE1MVHJhbnNmb3JtIiwiTGluZUhUTUxUcmFuc2Zvcm0iLCJmcm9tRm9vdG5vdGVIVE1MVHJhbnNmb3JtIiwibnVtYmVycyIsInZhbHVlcyIsImZvb3Rub3RlSXRlbUhUTUxUcmFuc2Zvcm1zIiwiaW5kZXhPZiIsImZvb3Rub3RlSXRlbUhUTUxUcmFuc2Zvcm0iLCJGb290bm90ZUl0ZW1IVE1MVHJhbnNmb3JtIiwiZnJvbUxpbmVUTUxUcmFuc2Zvcm1BbmRJZGVudGlmaWVyIiwiZm9vdG5vdGVIVE1MTm9kZSIsIkZvb3Rub3RlSFRNTFRyYW5zZm9ybSIsImZyb21Gb290bm90ZUhUTUxOb2RlIiwiRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybSIsImZyb21Gb290bm90ZUxpbmtIVE1MTm9kZSIsIm5lc3RlZEZvb3Rub3RlTGlua0hUTUxOb2RlIiwiTmVzdGVkRm9vdG5vdGVMaW5rSFRNTFRyYW5zZm9ybSIsImZyb21OZXN0ZWRGb290bm90ZUxpbmtIVE1MTm9kZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lBb0VnQkEsb0JBQW9CO2VBQXBCQTs7SUE4SUFDLGdEQUFnRDtlQUFoREE7O0lBMUxBQyxjQUFjO2VBQWRBOztJQWdMQUMsNENBQTRDO2VBQTVDQTs7SUExREFDLDJCQUEyQjtlQUEzQkE7O0lBM0NBQyx3QkFBd0I7ZUFBeEJBOztJQVhBQyx1QkFBdUI7ZUFBdkJBOztJQTZFQUMsZ0NBQWdDO2VBQWhDQTs7SUE3R0FDLGVBQWU7ZUFBZkE7O0lBdUlBQyxpQ0FBaUM7ZUFBakNBOztJQWRBQyxpQ0FBaUM7ZUFBakNBOzs7eUJBL0tlOzJEQUVMOytEQUNHOzJEQUNDO2dFQUNJO21FQUNJO21FQUNBO3lFQUNNO2dFQUNBO2lFQUNDO3lCQUVGO3FCQU1TOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVwRCxJQUFNLEFBQUVDLG1CQUFxQkMseUJBQWMsQ0FBbkNEO0FBRUQsU0FBU1QsZUFBZVcsU0FBUztJQUN0QyxJQUFNQyx3QkFBd0IsRUFBRTtJQUVoQyxJQUFJQyxtQkFBbUIsRUFBRTtJQUV6QkYsVUFBVUcsT0FBTyxDQUFDLFNBQUNDO1FBQ2pCLElBQU1DLDJCQUE0QkQsQUFBUSxZQUFSQSxVQUFvQkUsaUJBQWdCO1FBRXRFLElBQUksQ0FBQ0QsMEJBQTBCO1lBQzdCLElBQU1FLHdCQUF3QkwsaUJBQWlCTSxNQUFNO1lBRXJELElBQUlELHdCQUF3QixHQUFHO2dCQUM3Qk4sc0JBQXNCUSxJQUFJLENBQUNQO2dCQUUzQkEsbUJBQW1CLEVBQUU7WUFDdkI7UUFDRjtRQUVBLElBQU1RLGtCQUFrQk4sVUFBVSxHQUFHO1FBRXJDRixpQkFBaUJPLElBQUksQ0FBQ0M7SUFDeEI7SUFFQSxJQUFNSCx3QkFBd0JMLGlCQUFpQk0sTUFBTTtJQUVyRCxJQUFJRCx1QkFBdUI7UUFDekJOLHNCQUFzQlEsSUFBSSxDQUFDUDtJQUM3QjtJQUVBLE9BQU9EO0FBQ1Q7QUFFTyxTQUFTTixnQkFBZ0JnQixJQUFJO0lBQ2xDLElBQU1YLFlBQVlZLElBQUFBLHdCQUFpQixFQUFDRDtJQUVwQ1gsVUFBVUcsT0FBTyxDQUFDLFNBQUNDO1FBQ2pCLElBQU1TLGdCQUFnQkMsYUFBYSxDQUFDQyxZQUFZLENBQUNYO1FBRWpEUyxjQUFjRyxNQUFNO0lBQ3RCO0lBRUEsT0FBT2hCO0FBQ1Q7QUFFTyxTQUFTYixxQkFBcUI4QixzQkFBc0IsRUFBRU4sSUFBSSxFQUFFTyxPQUFPO0lBQ3hFLElBQU1DLHdCQUF3QkMsSUFBQUEsb0NBQTZCLEVBQUNULE9BQ3REVSw2QkFBNkJDLG9EQUFvREg7SUFFdkZyQixpQkFBaUJ1Qiw0QkFBNEIsU0FBQ0U7UUFDNUMsSUFBTUMsYUFBYUQsMEJBQTBCQyxVQUFVLENBQUNOLFVBQ2xETyx3QkFBd0JSLHVCQUF1QlMsSUFBSSxDQUFDLFNBQUNEO1lBQ25ELElBQU1FLG9CQUFvQkYsc0JBQXNCRyxlQUFlLENBQUNKLFlBQVlOO1lBRTVFLElBQUlTLG1CQUFtQjtnQkFDckIsT0FBTztZQUNUO1FBQ0YsTUFBTTtRQUVaLElBQUlGLDBCQUEwQixNQUFNO1lBQ2xDQSxzQkFBc0JJLGlDQUFpQyxDQUFDTjtRQUMxRDtJQUNGO0FBQ0Y7QUFFTyxTQUFTOUIsd0JBQXdCa0IsSUFBSTtJQUMxQyxJQUFNbUIsb0JBQW9CQyxJQUFBQSxnQ0FBeUIsRUFBQ3BCLE9BQzlDTSx5QkFBeUJlLDRDQUE0Q0Y7SUFFM0ViLHVCQUF1QmQsT0FBTyxDQUFDLFNBQUNzQjtRQUM5QkEsc0JBQXNCVCxNQUFNO0lBQzlCO0lBRUEsT0FBT0M7QUFDVDtBQUVPLFNBQVN6Qix5QkFBeUJTLHFCQUFxQixFQUFFaUIsT0FBTztJQUNyRSxJQUFNZSwwQkFBMEIsRUFBRTtJQUVsQyxnQ0FBMERmLFFBQWxEZ0Isa0JBQUFBLDBEQUFtQkMscUNBQTBCO0lBRXJELElBQUlDLFlBQVksR0FDWkMscUJBQXFCLEVBQUU7SUFFM0JwQyxzQkFBc0JFLE9BQU8sQ0FBQyxTQUFDRDtZQXFCN0JtQztRQXBCQSxJQUFNQyxhQUFhcEMsaUJBQWlCcUMsTUFBTSxDQUFDLFNBQUNELFlBQVk1QjtZQUN0RCxJQUFNOEIsUUFBUTlCLGdCQUFnQjhCLEtBQUssQ0FBQ3RCO1lBRXBDb0IsY0FBY0U7WUFFZCxPQUFPRjtRQUNULEdBQUc7UUFFSCxJQUFNRywyQkFBMkJKLG1CQUFtQjdCLE1BQU07UUFFMUQsSUFBSWlDLDJCQUEyQixHQUFHO1lBQ2hDLElBQUlMLFlBQVlFLGFBQWFKLGtCQUFrQjtnQkFDN0NELHdCQUF3QnhCLElBQUksQ0FBQzRCO2dCQUU3QkQsWUFBWTtnQkFFWkMscUJBQXFCLEVBQUU7WUFDekI7UUFDRjtRQUVBQSxDQUFBQSxzQkFBQUEsb0JBQW1CNUIsSUFBSSxPQUF2QjRCLHFCQUF3QixxQkFBR25DO1FBRTNCa0MsYUFBYUU7SUFDZjtJQUVBLElBQU1HLDJCQUEyQkosbUJBQW1CN0IsTUFBTTtJQUUxRCxJQUFJaUMsMEJBQTBCO1FBQzVCUix3QkFBd0J4QixJQUFJLENBQUM0QjtJQUMvQjtJQUVBLE9BQU9KO0FBQ1Q7QUFFTyxTQUFTMUMsNEJBQTRCMEIsc0JBQXNCLEVBQUV5QixhQUFhLEVBQUUvQixJQUFJLEVBQUVPLE9BQU87SUFDOUYsSUFBTUMsd0JBQXdCQyxJQUFBQSxvQ0FBNkIsRUFBQ1QsT0FDdERnQyxjQUFjQyxPQUFPQyxJQUFJLENBQUNILGdCQUMxQkksb0JBQW9CSCxZQUFZbkMsTUFBTSxFQUN0Q3VDLFFBQVFELG9CQUFvQjtJQUVsQzdCLHVCQUF1QmQsT0FBTyxDQUFDLFNBQUNzQix1QkFBdUJ1QjtRQUNyRCxJQUFNeEIsYUFBYUMsc0JBQXNCRCxVQUFVLENBQUNOLFVBQzlDK0IsU0FBU0YsUUFBUUM7UUFFdkJOLGFBQWEsQ0FBQ2xCLFdBQVcsR0FBR3lCO0lBQzlCO0lBRUE5QixzQkFBc0JoQixPQUFPLENBQUMsU0FBQytDO1FBQzdCLElBQU0xQixhQUFhMEIscUJBQXFCMUIsVUFBVSxDQUFDTixVQUM3QytCLFNBQVNQLGFBQWEsQ0FBQ2xCLFdBQVc7UUFFeEMwQixxQkFBcUJDLFNBQVMsQ0FBQ0Y7SUFDakM7SUFFQSxPQUFPRjtBQUNUO0FBRU8sU0FBU3JELGlDQUFpQ2lCLElBQUk7SUFDbkQsSUFBTXlDLDZCQUE2QkMsSUFBQUEseUNBQWtDLEVBQUMxQztJQUV0RSxJQUFJeUMsK0JBQStCLE1BQU07UUFDdkMsSUFBTUUsa0NBQWtDQyxrQkFBK0IsQ0FBQ0MsOEJBQThCLENBQUNKO1FBRXZHRSxnQ0FBZ0N0QyxNQUFNO0lBQ3hDO0lBRUEsT0FBT29DO0FBQ1Q7QUFFTyxTQUFTdkQsa0NBQWtDYyxJQUFJO0lBQ3BELElBQUk4QyxtQ0FBbUM7SUFFdkMsSUFBTUMsOEJBQThCQyxJQUFBQSwwQ0FBbUMsRUFBQ2hEO0lBRXhFLElBQUkrQyxnQ0FBZ0MsTUFBTTtRQUN4Q0QsbUNBQW1DRyxtQkFBZ0MsQ0FBQ0MsK0JBQStCLENBQUNIO1FBRXBHRCxpQ0FBaUN6QyxNQUFNO0lBQ3pDO0lBRUEsT0FBT3lDO0FBQ1Q7QUFFTyxTQUFTN0Qsa0NBQWtDZSxJQUFJO0lBQ3BELElBQU1tRCw4QkFBOEJDLElBQUFBLDBDQUFtQyxFQUFDcEQsT0FDbEVxRCxtQ0FBbUNDLGdFQUFnRUg7SUFFekdFLGlDQUFpQzdELE9BQU8sQ0FBQyxTQUFDK0Q7UUFDeENBLGdDQUFnQ2xELE1BQU07SUFDeEM7QUFDRjtBQUVPLFNBQVMxQiw2Q0FBNkMyQixzQkFBc0I7SUFDakYsSUFBTWtELHFCQUFxQmxELHVCQUF1Qm1ELEdBQUcsQ0FBQyxTQUFDM0M7UUFDckQsSUFBTTRDLG9CQUFvQkMsYUFBaUIsQ0FBQ0MseUJBQXlCLENBQUM5QztRQUV0RSxPQUFPNEM7SUFDVDtJQUVBLE9BQU9GO0FBQ1Q7QUFFTyxTQUFTL0UsaURBQWlEK0Usa0JBQWtCLEVBQUV6QixhQUFhLEVBQUVLLEtBQUs7SUFDdkcsSUFBTXlCLFVBQVU1QixPQUFPNkIsTUFBTSxDQUFDL0IsZ0JBQ3hCQyxjQUFjQyxPQUFPQyxJQUFJLENBQUNILGdCQUMxQmdDLDZCQUE2QlAsbUJBQW1CQyxHQUFHLENBQUMsU0FBQ0MsbUJBQW1CckI7UUFDdEUsSUFBTUMsU0FBU0YsUUFBUUM7UUFFdkJBLFFBQVF3QixRQUFRRyxPQUFPLENBQUMxQjtRQUV4QixJQUFNekIsYUFBYW1CLFdBQVcsQ0FBQ0ssTUFBTSxFQUMvQjRCLDRCQUE0QkMscUJBQXlCLENBQUNDLGlDQUFpQyxDQUFDVCxtQkFBbUI3QztRQUVqSCxPQUFPb0Q7SUFDVDtJQUVOLE9BQU9GO0FBQ1Q7QUFFQSxTQUFTMUMsNENBQTRDRixpQkFBaUI7SUFDcEUsSUFBTWIseUJBQXlCYSxrQkFBa0JzQyxHQUFHLENBQUMsU0FBQ1c7UUFDcEQsSUFBTXRELHdCQUF3QnVELGtCQUFxQixDQUFDQyxvQkFBb0IsQ0FBQ0Y7UUFFekUsT0FBT3REO0lBQ1Q7SUFFQSxPQUFPUjtBQUNUO0FBRUEsU0FBU0ssb0RBQW9ESCxxQkFBcUI7SUFDaEYsSUFBTUUsNkJBQTZCRixzQkFBc0JpRCxHQUFHLENBQUMsU0FBQ2xCO1FBQzVELElBQU0zQiw0QkFBNEIyRCxxQkFBeUIsQ0FBQ0Msd0JBQXdCLENBQUNqQztRQUVyRixPQUFPM0I7SUFDVDtJQUVBLE9BQU9GO0FBQ1Q7QUFFQSxTQUFTNEMsZ0VBQWdFSCwyQkFBMkI7SUFDbEcsSUFBTUUsbUNBQW1DRiw0QkFBNEJNLEdBQUcsQ0FBQyxTQUFDZ0I7UUFDeEUsSUFBTWxCLGtDQUFrQ21CLDJCQUErQixDQUFDQyw4QkFBOEIsQ0FBQ0Y7UUFFdkcsT0FBT2xCO0lBQ1Q7SUFFQSxPQUFPRjtBQUNUIn0=