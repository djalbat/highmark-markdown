"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
function _export(target, all) {
    for(var name in all)Object.defineProperty(target, name, {
        enumerable: true,
        get: all[name]
    });
}
_export(exports, {
    default: function() {
        return _default;
    },
    leadingIndexFromNodeAndTokens: function() {
        return leadingIndexFromNodeAndTokens;
    },
    trailingIndexFromNodeAndTokens: function() {
        return trailingIndexFromNodeAndTokens;
    }
});
var _necessary = require("necessary");
var forwardsSome = _necessary.arrayUtilities.forwardsSome, backwardsSome = _necessary.arrayUtilities.backwardsSome;
function leadingIndexFromNodeAndTokens(node, tokens) {
    var leadingIndex;
    var nodeTerminalNode = node.isTerminalNode();
    if (nodeTerminalNode) {
        var terminalNode = node; ///
        leadingIndex = leadingIndexFromTerminalNodeAndTokens(terminalNode, tokens);
    } else {
        var nonTerminalNode = node; ///
        leadingIndex = leadingIndexFromNonTerminalNodeAndTokens(nonTerminalNode, tokens);
    }
    return leadingIndex;
}
function trailingIndexFromNodeAndTokens(node, tokens) {
    var trailingIndex;
    var nodeTerminalNode = node.isTerminalNode();
    if (nodeTerminalNode) {
        var terminalNode = node; ///
        trailingIndex = trailingIndexFromTerminalNodeAndTokens(terminalNode, tokens);
    } else {
        var nonTerminalNode = node; ///
        trailingIndex = trailingIndexFromNonTerminalNodeAndTokens(nonTerminalNode, tokens);
    }
    return trailingIndex;
}
var _default = {
    leadingIndexFromNodeAndTokens: leadingIndexFromNodeAndTokens,
    trailingIndexFromNodeAndTokens: trailingIndexFromNodeAndTokens
};
function leadingIndexFromTerminalNodeAndTokens(terminalNode, tokens) {
    var leadingIndex;
    var significantToken = terminalNode.getSignificantToken();
    if (significantToken === null) {
        leadingIndex = -1;
    } else {
        var significantTokenIndex = tokens.indexOf(significantToken);
        leadingIndex = significantTokenIndex; ///
    }
    return leadingIndex;
}
function trailingIndexFromTerminalNodeAndTokens(terminalNode, tokens) {
    var trailingIndex;
    var significantToken = terminalNode.getSignificantToken();
    if (significantToken === null) {
        trailingIndex = -1;
    } else {
        var significantTokenIndex = tokens.indexOf(significantToken);
        trailingIndex = significantTokenIndex; ///
    }
    return trailingIndex;
}
function leadingIndexFromNonTerminalNodeAndTokens(nonTerminalNode, tokens) {
    var leadingIndex;
    var childNodes = nonTerminalNode.getChildNodes();
    forwardsSome(childNodes, function(childNode) {
        var node = childNode;
        leadingIndex = leadingIndexFromNodeAndTokens(node, tokens);
        if (leadingIndex !== -1) {
            return true;
        }
    });
    return leadingIndex;
}
function trailingIndexFromNonTerminalNodeAndTokens(nonTerminalNode, tokens) {
    var trailingIndex;
    var childNodes = nonTerminalNode.getChildNodes();
    backwardsSome(childNodes, function(childNode) {
        var node = childNode;
        trailingIndex = trailingIndexFromNodeAndTokens(node, tokens);
        if (trailingIndex !== -1) {
            return true;
        }
    });
    return trailingIndex;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsaXRpZXMvbm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgYXJyYXlVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5cbmNvbnN0IHsgZm9yd2FyZHNTb21lLCBiYWNrd2FyZHNTb21lIH0gPSBhcnJheVV0aWxpdGllcztcblxuZXhwb3J0IGZ1bmN0aW9uIGxlYWRpbmdJbmRleEZyb21Ob2RlQW5kVG9rZW5zKG5vZGUsIHRva2Vucykge1xuICBsZXQgbGVhZGluZ0luZGV4O1xuXG4gIGNvbnN0IG5vZGVUZXJtaW5hbE5vZGUgPSBub2RlLmlzVGVybWluYWxOb2RlKCk7XG5cbiAgaWYgKG5vZGVUZXJtaW5hbE5vZGUpIHtcbiAgICBjb25zdCB0ZXJtaW5hbE5vZGUgPSBub2RlOyAgLy8vXG5cbiAgICBsZWFkaW5nSW5kZXggPSBsZWFkaW5nSW5kZXhGcm9tVGVybWluYWxOb2RlQW5kVG9rZW5zKHRlcm1pbmFsTm9kZSwgdG9rZW5zKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBub25UZXJtaW5hbE5vZGUgPSBub2RlOyAgLy8vXG5cbiAgICBsZWFkaW5nSW5kZXggPSBsZWFkaW5nSW5kZXhGcm9tTm9uVGVybWluYWxOb2RlQW5kVG9rZW5zKG5vblRlcm1pbmFsTm9kZSwgdG9rZW5zKTtcbiAgfVxuXG4gIHJldHVybiBsZWFkaW5nSW5kZXg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFpbGluZ0luZGV4RnJvbU5vZGVBbmRUb2tlbnMobm9kZSwgdG9rZW5zKSB7XG4gIGxldCB0cmFpbGluZ0luZGV4O1xuXG4gIGNvbnN0IG5vZGVUZXJtaW5hbE5vZGUgPSBub2RlLmlzVGVybWluYWxOb2RlKCk7XG5cbiAgaWYgKG5vZGVUZXJtaW5hbE5vZGUpIHtcbiAgICBjb25zdCB0ZXJtaW5hbE5vZGUgPSBub2RlOyAgLy8vXG5cbiAgICB0cmFpbGluZ0luZGV4ID0gdHJhaWxpbmdJbmRleEZyb21UZXJtaW5hbE5vZGVBbmRUb2tlbnModGVybWluYWxOb2RlLCB0b2tlbnMpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IG5vblRlcm1pbmFsTm9kZSA9IG5vZGU7ICAvLy9cblxuICAgIHRyYWlsaW5nSW5kZXggPSB0cmFpbGluZ0luZGV4RnJvbU5vblRlcm1pbmFsTm9kZUFuZFRva2Vucyhub25UZXJtaW5hbE5vZGUsIHRva2Vucyk7XG4gIH1cblxuICByZXR1cm4gdHJhaWxpbmdJbmRleDtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBsZWFkaW5nSW5kZXhGcm9tTm9kZUFuZFRva2VucyxcbiAgdHJhaWxpbmdJbmRleEZyb21Ob2RlQW5kVG9rZW5zXG59O1xuXG5mdW5jdGlvbiBsZWFkaW5nSW5kZXhGcm9tVGVybWluYWxOb2RlQW5kVG9rZW5zKHRlcm1pbmFsTm9kZSwgdG9rZW5zKSB7XG4gIGxldCBsZWFkaW5nSW5kZXg7XG5cbiAgY29uc3Qgc2lnbmlmaWNhbnRUb2tlbiA9IHRlcm1pbmFsTm9kZS5nZXRTaWduaWZpY2FudFRva2VuKCk7XG5cbiAgaWYgKHNpZ25pZmljYW50VG9rZW4gPT09IG51bGwpIHtcbiAgICBsZWFkaW5nSW5kZXggPSAtMTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzaWduaWZpY2FudFRva2VuSW5kZXggPSB0b2tlbnMuaW5kZXhPZihzaWduaWZpY2FudFRva2VuKTtcblxuICAgIGxlYWRpbmdJbmRleCA9IHNpZ25pZmljYW50VG9rZW5JbmRleDsgLy8vXG4gIH1cblxuICByZXR1cm4gbGVhZGluZ0luZGV4O1xufVxuXG5mdW5jdGlvbiB0cmFpbGluZ0luZGV4RnJvbVRlcm1pbmFsTm9kZUFuZFRva2Vucyh0ZXJtaW5hbE5vZGUsIHRva2Vucykge1xuICBsZXQgdHJhaWxpbmdJbmRleDtcblxuICBjb25zdCBzaWduaWZpY2FudFRva2VuID0gdGVybWluYWxOb2RlLmdldFNpZ25pZmljYW50VG9rZW4oKTtcblxuICBpZiAoc2lnbmlmaWNhbnRUb2tlbiA9PT0gbnVsbCkge1xuICAgIHRyYWlsaW5nSW5kZXggPSAtMTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBzaWduaWZpY2FudFRva2VuSW5kZXggPSB0b2tlbnMuaW5kZXhPZihzaWduaWZpY2FudFRva2VuKTtcblxuICAgIHRyYWlsaW5nSW5kZXggPSBzaWduaWZpY2FudFRva2VuSW5kZXg7IC8vL1xuICB9XG5cbiAgcmV0dXJuIHRyYWlsaW5nSW5kZXg7XG59XG5cbmZ1bmN0aW9uIGxlYWRpbmdJbmRleEZyb21Ob25UZXJtaW5hbE5vZGVBbmRUb2tlbnMobm9uVGVybWluYWxOb2RlLCB0b2tlbnMpIHtcbiAgbGV0IGxlYWRpbmdJbmRleDtcblxuICBjb25zdCBjaGlsZE5vZGVzID0gbm9uVGVybWluYWxOb2RlLmdldENoaWxkTm9kZXMoKTtcblxuICBmb3J3YXJkc1NvbWUoY2hpbGROb2RlcywgKGNoaWxkTm9kZSkgPT4ge1xuICAgIGNvbnN0IG5vZGUgPSBjaGlsZE5vZGU7XG5cbiAgICBsZWFkaW5nSW5kZXggPSBsZWFkaW5nSW5kZXhGcm9tTm9kZUFuZFRva2Vucyhub2RlLCB0b2tlbnMpO1xuXG4gICAgaWYgKGxlYWRpbmdJbmRleCAhPT0gLTEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGxlYWRpbmdJbmRleDtcbn1cblxuZnVuY3Rpb24gdHJhaWxpbmdJbmRleEZyb21Ob25UZXJtaW5hbE5vZGVBbmRUb2tlbnMobm9uVGVybWluYWxOb2RlLCB0b2tlbnMpIHtcbiAgbGV0IHRyYWlsaW5nSW5kZXg7XG5cbiAgY29uc3QgY2hpbGROb2RlcyA9IG5vblRlcm1pbmFsTm9kZS5nZXRDaGlsZE5vZGVzKCk7XG5cbiAgYmFja3dhcmRzU29tZShjaGlsZE5vZGVzLCAoY2hpbGROb2RlKSA9PiB7XG4gICAgY29uc3Qgbm9kZSA9IGNoaWxkTm9kZTtcblxuICAgIHRyYWlsaW5nSW5kZXggPSB0cmFpbGluZ0luZGV4RnJvbU5vZGVBbmRUb2tlbnMobm9kZSwgdG9rZW5zKTtcblxuICAgIGlmICh0cmFpbGluZ0luZGV4ICE9PSAtMSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gdHJhaWxpbmdJbmRleDtcbn1cbiJdLCJuYW1lcyI6WyJsZWFkaW5nSW5kZXhGcm9tTm9kZUFuZFRva2VucyIsInRyYWlsaW5nSW5kZXhGcm9tTm9kZUFuZFRva2VucyIsImZvcndhcmRzU29tZSIsImFycmF5VXRpbGl0aWVzIiwiYmFja3dhcmRzU29tZSIsIm5vZGUiLCJ0b2tlbnMiLCJsZWFkaW5nSW5kZXgiLCJub2RlVGVybWluYWxOb2RlIiwiaXNUZXJtaW5hbE5vZGUiLCJ0ZXJtaW5hbE5vZGUiLCJsZWFkaW5nSW5kZXhGcm9tVGVybWluYWxOb2RlQW5kVG9rZW5zIiwibm9uVGVybWluYWxOb2RlIiwibGVhZGluZ0luZGV4RnJvbU5vblRlcm1pbmFsTm9kZUFuZFRva2VucyIsInRyYWlsaW5nSW5kZXgiLCJ0cmFpbGluZ0luZGV4RnJvbVRlcm1pbmFsTm9kZUFuZFRva2VucyIsInRyYWlsaW5nSW5kZXhGcm9tTm9uVGVybWluYWxOb2RlQW5kVG9rZW5zIiwic2lnbmlmaWNhbnRUb2tlbiIsImdldFNpZ25pZmljYW50VG9rZW4iLCJzaWduaWZpY2FudFRva2VuSW5kZXgiLCJpbmRleE9mIiwiY2hpbGROb2RlcyIsImdldENoaWxkTm9kZXMiLCJjaGlsZE5vZGUiXSwicmFuZ2VNYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OyIsIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7SUEwQ0EsT0FHRTtlQUhGOztJQXBDZ0JBLDZCQUE2QjtlQUE3QkE7O0lBa0JBQyw4QkFBOEI7ZUFBOUJBOzs7eUJBdEJlO0FBRS9CLElBQVFDLGVBQWdDQyx5QkFBYyxDQUE5Q0QsY0FBY0UsZ0JBQWtCRCx5QkFBYyxDQUFoQ0M7QUFFZixTQUFTSiw4QkFBOEJLLElBQUksRUFBRUMsTUFBTTtJQUN4RCxJQUFJQztJQUVKLElBQU1DLG1CQUFtQkgsS0FBS0ksY0FBYztJQUU1QyxJQUFJRCxrQkFBa0I7UUFDcEIsSUFBTUUsZUFBZUwsTUFBTyxHQUFHO1FBRS9CRSxlQUFlSSxzQ0FBc0NELGNBQWNKO0lBQ3JFLE9BQU87UUFDTCxJQUFNTSxrQkFBa0JQLE1BQU8sR0FBRztRQUVsQ0UsZUFBZU0seUNBQXlDRCxpQkFBaUJOO0lBQzNFO0lBRUEsT0FBT0M7QUFDVDtBQUVPLFNBQVNOLCtCQUErQkksSUFBSSxFQUFFQyxNQUFNO0lBQ3pELElBQUlRO0lBRUosSUFBTU4sbUJBQW1CSCxLQUFLSSxjQUFjO0lBRTVDLElBQUlELGtCQUFrQjtRQUNwQixJQUFNRSxlQUFlTCxNQUFPLEdBQUc7UUFFL0JTLGdCQUFnQkMsdUNBQXVDTCxjQUFjSjtJQUN2RSxPQUFPO1FBQ0wsSUFBTU0sa0JBQWtCUCxNQUFPLEdBQUc7UUFFbENTLGdCQUFnQkUsMENBQTBDSixpQkFBaUJOO0lBQzdFO0lBRUEsT0FBT1E7QUFDVDtJQUVBLFdBQWU7SUFDYmQsK0JBQUFBO0lBQ0FDLGdDQUFBQTtBQUNGO0FBRUEsU0FBU1Usc0NBQXNDRCxZQUFZLEVBQUVKLE1BQU07SUFDakUsSUFBSUM7SUFFSixJQUFNVSxtQkFBbUJQLGFBQWFRLG1CQUFtQjtJQUV6RCxJQUFJRCxxQkFBcUIsTUFBTTtRQUM3QlYsZUFBZSxDQUFDO0lBQ2xCLE9BQU87UUFDTCxJQUFNWSx3QkFBd0JiLE9BQU9jLE9BQU8sQ0FBQ0g7UUFFN0NWLGVBQWVZLHVCQUF1QixHQUFHO0lBQzNDO0lBRUEsT0FBT1o7QUFDVDtBQUVBLFNBQVNRLHVDQUF1Q0wsWUFBWSxFQUFFSixNQUFNO0lBQ2xFLElBQUlRO0lBRUosSUFBTUcsbUJBQW1CUCxhQUFhUSxtQkFBbUI7SUFFekQsSUFBSUQscUJBQXFCLE1BQU07UUFDN0JILGdCQUFnQixDQUFDO0lBQ25CLE9BQU87UUFDTCxJQUFNSyx3QkFBd0JiLE9BQU9jLE9BQU8sQ0FBQ0g7UUFFN0NILGdCQUFnQkssdUJBQXVCLEdBQUc7SUFDNUM7SUFFQSxPQUFPTDtBQUNUO0FBRUEsU0FBU0QseUNBQXlDRCxlQUFlLEVBQUVOLE1BQU07SUFDdkUsSUFBSUM7SUFFSixJQUFNYyxhQUFhVCxnQkFBZ0JVLGFBQWE7SUFFaERwQixhQUFhbUIsWUFBWSxTQUFDRTtRQUN4QixJQUFNbEIsT0FBT2tCO1FBRWJoQixlQUFlUCw4QkFBOEJLLE1BQU1DO1FBRW5ELElBQUlDLGlCQUFpQixDQUFDLEdBQUc7WUFDdkIsT0FBTztRQUNUO0lBQ0Y7SUFFQSxPQUFPQTtBQUNUO0FBRUEsU0FBU1MsMENBQTBDSixlQUFlLEVBQUVOLE1BQU07SUFDeEUsSUFBSVE7SUFFSixJQUFNTyxhQUFhVCxnQkFBZ0JVLGFBQWE7SUFFaERsQixjQUFjaUIsWUFBWSxTQUFDRTtRQUN6QixJQUFNbEIsT0FBT2tCO1FBRWJULGdCQUFnQmIsK0JBQStCSSxNQUFNQztRQUVyRCxJQUFJUSxrQkFBa0IsQ0FBQyxHQUFHO1lBQ3hCLE9BQU87UUFDVDtJQUNGO0lBRUEsT0FBT0E7QUFDVCJ9